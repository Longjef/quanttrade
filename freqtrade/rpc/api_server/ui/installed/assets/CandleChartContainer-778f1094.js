import{o as D,c as M,a as B,s as Wa,v as Mo,d as ye,r as E,i as R,x as It,$ as K,h as q,j as z,k as F,aG as Kt,g as Ye,ar as J,Q as je,b as P,w as L,Z as mt,J as Za,aH as Bo,z as We,E as Vo,aI as No,aJ as Ua,aK as zo,Y as kt,aL as Eo,as as Q,at as oe,U as Jt,f as ee,t as ne,av as at,K as Xt,aM as $o,N as He,a0 as yt,m as Qt,a1 as Ha,W as Lt,ax as Ro,aN as Fo,aO as Wo,aP as Zo,u as Ga,ap as Uo,C as ea,aQ as Ho,p as Go,e as jo,aC as qo,aR as Me,a3 as Yo,D as Ko,y as Jo,aS as Xo}from"./index-3d1c2723.js";import{_ as V,S as ja,B as Mt,P as Bt,G as Ze,c as qa,g as Ya,C as Ka,u as Vt,e as A,b as ie,m as ue,a as ce,d as Y,D as Ja,E as Qo,f as Xa,h as en,i as X,R as _t,j as Te,t as tn,k as Qa,l as an,n as ae,o as we,p as ta,q as on,r as nn,s as rn,v as sn,w as ln,x as un,y as eo,z as Ee,A as to,F as ot,H as cn,I as Ge,J as bt,K as dn,L as Nt,M as pn,N as hn,O as de,Q as fn,T as $e,Z as Ce,U as Se,V as aa,W as zt,X as vn,Y as ao,$ as gn,a0 as mn,a1 as oa,a2 as na,a3 as oo,a4 as yn,a5 as _n,a6 as bn,a7 as xn,a8 as Cn,a9 as Re,aa as Et,ab as Sn,ac as wn,ad as ia,ae as Pn,af as no,ag as io,ah as An,ai as Tn,aj as Dn,ak as On,al as In,am as kn,an as Ln,ao as Mn,ap as Bn,aq as ra,ar as Vn,as as sa,at as nt,au as Nn,av as zn,aw as En,ax as $n,ay as Rn,az as Fn,aA as Wn,aB as Zn,aC as Un,aD as Hn,aE as Gn,aF as jn,aG as qn,aH as Yn,aI as Kn,aJ as Jn}from"./install-419c7b94.js";import{c as Xn,p as ro,S as Qn,i as ei,t as ti,r as ai,a as oi,D as ni,b as ii,d as ri,s as si,A as li,e as ui,f as ci,g as di,h as pi,j as hi,k as fi,l as vi}from"./chartZoom-61c7f12b.js";import{c as gi}from"./createSeriesDataSimply-4c36629a.js";import{_ as mi}from"./plus-box-outline-a267a319.js";var le=(t=>(t.line="line",t.bar="bar",t.scatter="scatter",t))(le||{});const it={main_plot:{},subplots:{}};var yi=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.hasSymbolVisual=!0,a}return e.prototype.getInitialData=function(a,o){return Xn(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(a,o,n){return n.point(o.getItemLayout(a))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(ja);const _i=yi;var so=4,bi=function(){function t(){}return t}(),xi=function(t){V(e,t);function e(a){var o=t.call(this,a)||this;return o._off=0,o.hoverDataIdx=-1,o}return e.prototype.getDefaultShape=function(){return new bi},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(a,o){var n=o.points,i=o.size,r=this.symbolProxy,s=r.shape,l=a.getContext?a.getContext():a,u=l&&i[0]<so,c=this.softClipShape,d;if(u){this._ctx=l;return}for(this._ctx=null,d=this._off;d<n.length;){var p=n[d++],f=n[d++];isNaN(p)||isNaN(f)||c&&!c.contain(p,f)||(s.x=p-i[0]/2,s.y=f-i[1]/2,s.width=i[0],s.height=i[1],r.buildPath(a,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},e.prototype.afterBrush=function(){var a=this.shape,o=a.points,n=a.size,i=this._ctx,r=this.softClipShape,s;if(i){for(s=this._off;s<o.length;){var l=o[s++],u=o[s++];isNaN(l)||isNaN(u)||r&&!r.contain(l,u)||i.fillRect(l-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(a,o){for(var n=this.shape,i=n.points,r=n.size,s=Math.max(r[0],4),l=Math.max(r[1],4),u=i.length/2-1;u>=0;u--){var c=u*2,d=i[c]-s/2,p=i[c+1]-l/2;if(a>=d&&o>=p&&a<=d+s&&o<=p+l)return u}return-1},e.prototype.contain=function(a,o){var n=this.transformCoordToLocal(a,o),i=this.getBoundingRect();if(a=n[0],o=n[1],i.contain(a,o)){var r=this.hoverDataIdx=this.findDataIndex(a,o);return r>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var o=this.shape,n=o.points,i=o.size,r=i[0],s=i[1],l=1/0,u=1/0,c=-1/0,d=-1/0,p=0;p<n.length;){var f=n[p++],g=n[p++];l=Math.min(f,l),c=Math.max(f,c),u=Math.min(g,u),d=Math.max(g,d)}a=this._rect=new Mt(l-r/2,u-s/2,c-l+r,d-u+s)}return a},e}(Bt),Ci=function(){function t(){this.group=new Ze}return t.prototype.updateData=function(e,a){this._clear();var o=this._create();o.setShape({points:e.getLayout("points")}),this._setCommon(o,e,a)},t.prototype.updateLayout=function(e){var a=e.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var n=(o.endIndex-o.startIndex)*2,i=o.startIndex*4*2;a=new Float32Array(a.buffer,i,n)}o.setShape("points",a),o.reset()})},t.prototype.incrementalPrepareUpdate=function(e){this._clear()},t.prototype.incrementalUpdate=function(e,a,o){var n=this._newAdded[0],i=a.getLayout("points"),r=n&&n.shape.points;if(r&&r.length<2e4){var s=r.length,l=new Float32Array(s+i.length);l.set(r),l.set(i,s),n.endIndex=e.end,n.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:i}),this._setCommon(u,a,o)}},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new xi({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},t.prototype._setCommon=function(e,a,o){var n=a.hostModel;o=o||{};var i=a.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=o.clipShape||null,e.symbolProxy=qa(a.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var r=e.shape.size[0]<so;e.useStyle(n.getModel("itemStyle").getItemStyle(r?["color","shadowBlur","shadowColor"]:["color"]));var s=a.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var u=Ya(e);u.seriesIndex=n.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var d=e.hoverDataIdx;d>=0&&(u.dataIndex=d+(e.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}();const Si=Ci;var wi=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,o,n){var i=a.getData(),r=this._updateSymbolDraw(i,a);r.updateData(i,{clipShape:this._getClipShape(a)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(a,o,n){var i=a.getData(),r=this._updateSymbolDraw(i,a);r.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(a,o,n){this._symbolDraw.incrementalUpdate(a,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=a.end===o.getData().count()},e.prototype.updateTransform=function(a,o,n){var i=a.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var r=ro("").reset(a,o,n);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},e.prototype._getClipShape=function(a){var o=a.coordinateSystem,n=o&&o.getArea&&o.getArea();return a.get("clip",!0)?n:null},e.prototype._updateSymbolDraw=function(a,o){var n=this._symbolDraw,i=o.pipelineContext,r=i.large;return(!n||r!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=r?new Si:new Qn,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(a,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Ka);const Pi=wi;function Ai(t){Vt(ei),t.registerSeriesModel(_i),t.registerChartView(Pi),t.registerLayout(ro("scatter"))}var Ti={axisPointer:1,tooltip:1,brush:1};function Di(t,e,a){var o=e.getComponentByElement(t.topTarget),n=o&&o.coordinateSystem;return o&&o!==a&&!Ti.hasOwnProperty(o.mainType)&&n&&n.model!==a}var ge=!0,Fe=Math.min,Pe=Math.max,Oi=Math.pow,Ii=1e4,ki=6,Li=6,la="globalPan",Mi={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Bi={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},ua={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Vi=0,Ni=function(t){V(e,t);function e(a){var o=t.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=a,o.group=new Ze,o._uid="brushController_"+Vi++,A(Zi,function(n,i){this._handlers[i]=ie(n,this)},o),o}return e.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},e.prototype._doEnableBrush=function(a){var o=this._zr;this._enableGlobalPan||ti(o,la,this._uid),A(this._handlers,function(n,i){o.on(i,n)}),this._brushType=a.brushType,this._brushOption=ue(ce(ua),a,!0)},e.prototype._doDisableBrush=function(){var a=this._zr;ai(a,la,this._uid),A(this._handlers,function(o,n){a.off(n,o)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(a){if(a&&a.length){var o=this._panels={};A(a,function(n){o[n.panelId]=ce(n)})}else this._panels=null;return this},e.prototype.mount=function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=o.getLocalTransform(),this},e.prototype.updateCovers=function(a){a=Y(a,function(p){return ue(ce(ua),p,!0)});var o="\0-brush-index-",n=this._covers,i=this._covers=[],r=this,s=this._creatingCover;return new Ja(n,a,u,l).add(c).update(c).remove(d).execute(),this;function l(p,f){return(p.id!=null?p.id:o+f)+"-"+p.brushType}function u(p,f){return l(p.__brushOption,f)}function c(p,f){var g=a[p];if(f!=null&&n[f]===s)i[p]=n[f];else{var h=i[p]=f!=null?(n[f].__brushOption=g,n[f]):uo(r,lo(r,g));$t(r,h)}}function d(p){n[p]!==s&&r.group.remove(n[p])}},e.prototype.unmount=function(){return this.enableBrush(!1),xt(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Qo);function lo(t,e){var a=Ke[e.brushType].createCover(t,e);return a.__brushOption=e,po(a,e),t.group.add(a),a}function uo(t,e){var a=Rt(e);return a.endCreating&&(a.endCreating(t,e),po(e,e.__brushOption)),e}function co(t,e){var a=e.__brushOption;Rt(e).updateCoverShape(t,e,a.range,a)}function po(t,e){var a=e.z;a==null&&(a=Ii),t.traverse(function(o){o.z=a,o.z2=a})}function $t(t,e){Rt(e).updateCommon(t,e),co(t,e)}function Rt(t){return Ke[t.__brushOption.brushType]}function Ft(t,e,a){var o=t._panels;if(!o)return ge;var n,i=t._transform;return A(o,function(r){r.isTargetByCursor(e,a,i)&&(n=r)}),n}function ho(t,e){var a=t._panels;if(!a)return ge;var o=e.__brushOption.panelId;return o!=null?a[o]:ge}function xt(t){var e=t._covers,a=e.length;return A(e,function(o){t.group.remove(o)},t),e.length=0,!!a}function me(t,e){var a=Y(t._covers,function(o){var n=o.__brushOption,i=ce(n.range);return{brushType:n.brushType,panelId:n.panelId,range:i}});t.trigger("brush",{areas:a,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function zi(t){var e=t._track;if(!e.length)return!1;var a=e[e.length-1],o=e[0],n=a[0]-o[0],i=a[1]-o[1],r=Oi(n*n+i*i,.5);return r>ki}function fo(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function vo(t,e,a,o){var n=new Ze;return n.add(new _t({name:"main",style:Wt(a),silent:!0,draggable:!0,cursor:"move",drift:X(ca,t,e,n,["n","s","w","e"]),ondragend:X(me,e,{isEnd:!0})})),A(o,function(i){n.add(new _t({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:X(ca,t,e,n,i),ondragend:X(me,e,{isEnd:!0})}))}),n}function go(t,e,a,o){var n=o.brushStyle.lineWidth||0,i=Pe(n,Li),r=a[0][0],s=a[1][0],l=r-n/2,u=s-n/2,c=a[0][1],d=a[1][1],p=c-i+n/2,f=d-i+n/2,g=c-r,h=d-s,v=g+n,m=h+n;se(t,e,"main",r,s,g,h),o.transformable&&(se(t,e,"w",l,u,i,m),se(t,e,"e",p,u,i,m),se(t,e,"n",l,u,v,i),se(t,e,"s",l,f,v,i),se(t,e,"nw",l,u,i,i),se(t,e,"ne",p,u,i,i),se(t,e,"sw",l,f,i,i),se(t,e,"se",p,f,i,i))}function Ct(t,e){var a=e.__brushOption,o=a.transformable,n=e.childAt(0);n.useStyle(Wt(a)),n.attr({silent:!o,cursor:o?"move":"default"}),A([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var r=e.childOfName(i.join("")),s=i.length===1?St(t,i[0]):$i(t,i);r&&r.attr({silent:!o,invisible:!o,cursor:o?Bi[s]+"-resize":null})})}function se(t,e,a,o,n,i,r){var s=e.childOfName(a);s&&s.setShape(Fi(Zt(t,e,[[o,n],[o+i,n+r]])))}function Wt(t){return Te({strokeNoScale:!0},t.brushStyle)}function mo(t,e,a,o){var n=[Fe(t,a),Fe(e,o)],i=[Pe(t,a),Pe(e,o)];return[[n[0],i[0]],[n[1],i[1]]]}function Ei(t){return Qa(t.group)}function St(t,e){var a={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},n=tn(a[e],Ei(t));return o[n]}function $i(t,e){var a=[St(t,e[0]),St(t,e[1])];return(a[0]==="e"||a[0]==="w")&&a.reverse(),a.join("")}function ca(t,e,a,o,n,i){var r=a.__brushOption,s=t.toRectRange(r.range),l=yo(e,n,i);A(o,function(u){var c=Mi[u];s[c[0]][c[1]]+=l[c[0]]}),r.range=t.fromRectRange(mo(s[0][0],s[1][0],s[0][1],s[1][1])),$t(e,a),me(e,{isEnd:!1})}function Ri(t,e,a,o){var n=e.__brushOption.range,i=yo(t,a,o);A(n,function(r){r[0]+=i[0],r[1]+=i[1]}),$t(t,e),me(t,{isEnd:!1})}function yo(t,e,a){var o=t.group,n=o.transformCoordToLocal(e,a),i=o.transformCoordToLocal(0,0);return[n[0]-i[0],n[1]-i[1]]}function Zt(t,e,a){var o=ho(t,e);return o&&o!==ge?o.clipPath(a,t._transform):ce(a)}function Fi(t){var e=Fe(t[0][0],t[1][0]),a=Fe(t[0][1],t[1][1]),o=Pe(t[0][0],t[1][0]),n=Pe(t[0][1],t[1][1]);return{x:e,y:a,width:o-e,height:n-a}}function Wi(t,e,a){if(!(!t._brushType||Ui(t,e.offsetX,e.offsetY))){var o=t._zr,n=t._covers,i=Ft(t,e,a);if(!t._dragging)for(var r=0;r<n.length;r++){var s=n[r].__brushOption;if(i&&(i===ge||s.panelId===i.panelId)&&Ke[s.brushType].contain(n[r],a[0],a[1]))return}i&&o.setCursorStyle("crosshair")}}function wt(t){var e=t.event;e.preventDefault&&e.preventDefault()}function Pt(t,e,a){return t.childOfName("main").contain(e,a)}function _o(t,e,a,o){var n=t._creatingCover,i=t._creatingPanel,r=t._brushOption,s;if(t._track.push(a.slice()),zi(t)||n){if(i&&!n){r.brushMode==="single"&&xt(t);var l=ce(r);l.brushType=da(l.brushType,i),l.panelId=i===ge?null:i.panelId,n=t._creatingCover=lo(t,l),t._covers.push(n)}if(n){var u=Ke[da(t._brushType,i)],c=n.__brushOption;c.range=u.getCreatingRange(Zt(t,n,t._track)),o&&(uo(t,n),u.updateCommon(t,n)),co(t,n),s={isEnd:o}}}else o&&r.brushMode==="single"&&r.removeOnClick&&Ft(t,e,a)&&xt(t)&&(s={isEnd:o,removeOnClick:!0});return s}function da(t,e){return t==="auto"?e.defaultBrushType:t}var Zi={mousedown:function(t){if(this._dragging)pa(this,t);else if(!t.target||!t.target.draggable){wt(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var a=this._creatingPanel=Ft(this,t,e);a&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,a=t.offsetY,o=this.group.transformCoordToLocal(e,a);if(Wi(this,t,o),this._dragging){wt(t);var n=_o(this,t,o,!1);n&&me(this,n)}},mouseup:function(t){pa(this,t)}};function pa(t,e){if(t._dragging){wt(e);var a=e.offsetX,o=e.offsetY,n=t.group.transformCoordToLocal(a,o),i=_o(t,e,n,!0);t._dragging=!1,t._track=[],t._creatingCover=null,i&&me(t,i)}}function Ui(t,e,a){var o=t._zr;return e<0||e>o.getWidth()||a<0||a>o.getHeight()}var Ke={lineX:ha(0),lineY:ha(1),rect:{createCover:function(t,e){function a(o){return o}return vo({toRectRange:a,fromRectRange:a},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=fo(t);return mo(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,a,o){go(t,e,a,o)},updateCommon:Ct,contain:Pt},polygon:{createCover:function(t,e){var a=new Ze;return a.add(new Xa({name:"main",style:Wt(e),silent:!0})),a},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new en({name:"main",draggable:!0,drift:X(Ri,t,e),ondragend:X(me,t,{isEnd:!0})}))},updateCoverShape:function(t,e,a,o){e.childAt(0).setShape({points:Zt(t,e,a)})},updateCommon:Ct,contain:Pt}};function ha(t){return{createCover:function(e,a){return vo({toRectRange:function(o){var n=[o,[0,100]];return t&&n.reverse(),n},fromRectRange:function(o){return o[t]}},e,a,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var a=fo(e),o=Fe(a[0][t],a[1][t]),n=Pe(a[0][t],a[1][t]);return[o,n]},updateCoverShape:function(e,a,o,n){var i,r=ho(e,a);if(r!==ge&&r.getLinearBrushOtherExtent)i=r.getLinearBrushOtherExtent(t);else{var s=e._zr;i=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[o,i];t&&l.reverse(),go(e,a,l,n)},updateCommon:Ct,contain:Pt}}const Hi=Ni;function Gi(t){return t=Ut(t),function(e){return an(e,t)}}function ji(t,e){return t=Ut(t),function(a){var o=e??a,n=o?t.width:t.height,i=o?t.x:t.y;return[i,i+(n||0)]}}function qi(t,e,a){var o=Ut(t);return function(n,i){return o.contain(i[0],i[1])&&!Di(n,e,a)}}function Ut(t){return Mt.create(t)}var Yi=function(){function t(){}return t.prototype.getInitialData=function(e,a){var o,n=a.getComponent("xAxis",this.get("xAxisIndex")),i=a.getComponent("yAxis",this.get("yAxisIndex")),r=n.get("type"),s=i.get("type"),l;r==="category"?(e.layout="horizontal",o=n.getOrdinalMeta(),l=!0):s==="category"?(e.layout="vertical",o=i.getOrdinalMeta(),l=!0):e.layout=e.layout||"horizontal";var u=["x","y"],c=e.layout==="horizontal"?0:1,d=this._baseAxisDim=u[c],p=u[1-c],f=[n,i],g=f[c].get("type"),h=f[1-c].get("type"),v=e.data;if(v&&l){var m=[];A(v,function(y,w){var C;ae(y)?(C=y.slice(),y.unshift(w)):ae(y.value)?(C=we({},y),C.value=C.value.slice(),y.value.unshift(w)):C=y,m.push(C)}),e.data=m}var _=this.defaultValueDimensions,b=[{name:d,type:ta(g),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:ta(h),dimsDef:_.slice()}];return gi(this,{coordDimensions:b,dimensionsCount:_.length+1,encodeDefaulter:X(on,b,this)})},t.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},t}(),Ki=["color","borderColor"],Ji=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,o,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},e.prototype.incrementalPrepareRender=function(a,o,n){this._clear(),this._updateDrawMode(a)},e.prototype.incrementalRender=function(a,o,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,o):this._incrementalRenderNormal(a,o)},e.prototype.eachRendered=function(a){nn(this._progressiveEls||this.group,a)},e.prototype._updateDrawMode=function(a){var o=a.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},e.prototype._renderNormal=function(a){var o=a.getData(),n=this._data,i=this.group,r=o.getLayout("isSimpleBox"),s=a.get("clip",!0),l=a.coordinateSystem,u=l.getArea&&l.getArea();this._data||i.removeAll(),o.diff(n).add(function(c){if(o.hasValue(c)){var d=o.getItemLayout(c);if(s&&fa(u,d))return;var p=rt(d,c,!0);rn(p,{shape:{points:d.ends}},a,c),st(p,o,c,r),i.add(p),o.setItemGraphicEl(c,p)}}).update(function(c,d){var p=n.getItemGraphicEl(d);if(!o.hasValue(c)){i.remove(p);return}var f=o.getItemLayout(c);if(s&&fa(u,f)){i.remove(p);return}p?(sn(p,{shape:{points:f.ends}},a,c),ln(p)):p=rt(f),st(p,o,c,r),i.add(p),o.setItemGraphicEl(c,p)}).remove(function(c){var d=n.getItemGraphicEl(c);d&&i.remove(d)}).execute(),this._data=o},e.prototype._renderLarge=function(a){this._clear(),va(a,this.group);var o=a.get("clip",!0)?oi(a.coordinateSystem,!1,a):null;o?this.group.setClipPath(o):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(a,o){for(var n=o.getData(),i=n.getLayout("isSimpleBox"),r;(r=a.next())!=null;){var s=n.getItemLayout(r),l=rt(s);st(l,n,r,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(a,o){va(o,this.group,this._progressiveEls,!0)},e.prototype.remove=function(a){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Ka),Xi=function(){function t(){}return t}(),Qi=function(t){V(e,t);function e(a){var o=t.call(this,a)||this;return o.type="normalCandlestickBox",o}return e.prototype.getDefaultShape=function(){return new Xi},e.prototype.buildPath=function(a,o){var n=o.points;this.__simpleBox?(a.moveTo(n[4][0],n[4][1]),a.lineTo(n[6][0],n[6][1])):(a.moveTo(n[0][0],n[0][1]),a.lineTo(n[1][0],n[1][1]),a.lineTo(n[2][0],n[2][1]),a.lineTo(n[3][0],n[3][1]),a.closePath(),a.moveTo(n[4][0],n[4][1]),a.lineTo(n[5][0],n[5][1]),a.moveTo(n[6][0],n[6][1]),a.lineTo(n[7][0],n[7][1]))},e}(Bt);function rt(t,e,a){var o=t.ends;return new Qi({shape:{points:a?er(o,t):o},z2:100})}function fa(t,e){for(var a=!0,o=0;o<e.ends.length;o++)if(t.contain(e.ends[o][0],e.ends[o][1])){a=!1;break}return a}function st(t,e,a,o){var n=e.getItemModel(a);t.useStyle(e.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.__simpleBox=o,un(t,n)}function er(t,e){return Y(t,function(a){return a=a.slice(),a[1]=e.initBaseline,a})}var tr=function(){function t(){}return t}(),lt=function(t){V(e,t);function e(a){var o=t.call(this,a)||this;return o.type="largeCandlestickBox",o}return e.prototype.getDefaultShape=function(){return new tr},e.prototype.buildPath=function(a,o){for(var n=o.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];a.moveTo(r,n[i++]),a.lineTo(r,n[i++])}else i+=3},e}(Bt);function va(t,e,a,o){var n=t.getData(),i=n.getLayout("largePoints"),r=new lt({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(r);var s=new lt({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new lt({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(l),ut(1,r,t),ut(-1,s,t),ut(0,l,t),o&&(r.incremental=!0,s.incremental=!0),a&&a.push(r,s)}function ut(t,e,a,o){var n=a.get(["itemStyle",t>0?"borderColor":"borderColor0"])||a.get(["itemStyle",t>0?"color":"color0"]);t===0&&(n=a.get(["itemStyle","borderColorDoji"]));var i=a.getModel("itemStyle").getItemStyle(Ki);e.useStyle(i),e.style.fill=null,e.style.stroke=n}const ar=Ji;var bo=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(a,o,n){var i=o.getItemLayout(a);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(ja);eo(bo,Yi,!0);const or=bo;function nr(t){!t||!ae(t.series)||A(t.series,function(e){Ee(e)&&e.type==="k"&&(e.type="candlestick")})}var ir=["itemStyle","borderColor"],rr=["itemStyle","borderColor0"],sr=["itemStyle","borderColorDoji"],lr=["itemStyle","color"],ur=["itemStyle","color0"],cr={seriesType:"candlestick",plan:to(),performRawSeries:!0,reset:function(t,e){function a(i,r){return r.get(i>0?lr:ur)}function o(i,r){return r.get(i===0?sr:i>0?ir:rr)}if(!e.isSeriesFiltered(t)){var n=t.pipelineContext.large;return!n&&{progress:function(i,r){for(var s;(s=i.next())!=null;){var l=r.getItemModel(s),u=r.getItemLayout(s).sign,c=l.getItemStyle();c.fill=a(u,l),c.stroke=o(u,l)||c.fill;var d=r.ensureUniqueItemVisual(s,"style");we(d,c)}}}}}};const dr=cr;var pr={seriesType:"candlestick",plan:to(),reset:function(t){var e=t.coordinateSystem,a=t.getData(),o=hr(t,a),n=0,i=1,r=["x","y"],s=a.getDimensionIndex(a.mapDimension(r[n])),l=Y(a.mapDimensionsAll(r[i]),a.getDimensionIndex,a),u=l[0],c=l[1],d=l[2],p=l[3];if(a.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),s<0||l.length<4)return;return{progress:t.pipelineContext.large?g:f};function f(h,v){for(var m,_=v.getStore();(m=h.next())!=null;){var b=_.get(s,m),y=_.get(u,m),w=_.get(c,m),C=_.get(d,m),O=_.get(p,m),I=Math.min(y,w),k=Math.max(y,w),S=re(I,b),T=re(k,b),W=re(C,b),Z=re(O,b),U=[];De(U,T,0),De(U,S,1),U.push(pe(Z),pe(T),pe(W),pe(S));var _e=v.getItemModel(m),H=!!_e.get(["itemStyle","borderColorDoji"]);v.setItemLayout(m,{sign:ga(_,m,y,w,c,H),initBaseline:y>w?T[i]:S[i],ends:U,brushRect:Ue(C,O,b)})}function re(x,$){var G=[];return G[n]=$,G[i]=x,isNaN($)||isNaN(x)?[NaN,NaN]:e.dataToPoint(G)}function De(x,$,G){var j=$.slice(),N=$.slice();j[n]=ot(j[n]+o/2,1,!1),N[n]=ot(N[n]-o/2,1,!0),G?x.push(j,N):x.push(N,j)}function Ue(x,$,G){var j=re(x,G),N=re($,G);return j[n]-=o/2,N[n]-=o/2,{x:j[0],y:j[1],width:o,height:N[1]-j[1]}}function pe(x){return x[n]=ot(x[n],1),x}}function g(h,v){for(var m=cn(h.count*4),_=0,b,y=[],w=[],C,O=v.getStore(),I=!!t.get(["itemStyle","borderColorDoji"]);(C=h.next())!=null;){var k=O.get(s,C),S=O.get(u,C),T=O.get(c,C),W=O.get(d,C),Z=O.get(p,C);if(isNaN(k)||isNaN(W)||isNaN(Z)){m[_++]=NaN,_+=3;continue}m[_++]=ga(O,C,S,T,c,I),y[n]=k,y[i]=W,b=e.dataToPoint(y,null,w),m[_++]=b?b[0]:NaN,m[_++]=b?b[1]:NaN,y[i]=Z,b=e.dataToPoint(y,null,w),m[_++]=b?b[1]:NaN}v.setLayout("largePoints",m)}}};function ga(t,e,a,o,n,i){var r;return a>o?r=-1:a<o?r=1:r=i?0:e>0?t.get(n,e-1)<=o?1:-1:1,r}function hr(t,e){var a=t.getBaseAxis(),o,n=a.type==="category"?a.getBandWidth():(o=a.getExtent(),Math.abs(o[1]-o[0])/e.count()),i=Ge(bt(t.get("barMaxWidth"),n),n),r=Ge(bt(t.get("barMinWidth"),1),n),s=t.get("barWidth");return s!=null?Ge(s,n):Math.max(Math.min(n/2,i),r)}const fr=pr;function vr(t){t.registerChartView(ar),t.registerSeriesModel(or),t.registerPreprocessor(nr),t.registerVisual(dr),t.registerLayout(fr)}var gr=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(a,o,n){var i=dn(a);t.prototype.init.apply(this,arguments),ma(a,i)},e.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),ma(this.option,a)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(Nt);function ma(t,e){var a=t.cellSize,o;ae(a)?o=a:o=t.cellSize=[a,a],o.length===1&&(o[1]=o[0]);var n=Y([0,1],function(i){return pn(e,i)&&(o[i]="auto"),o[i]!=null&&o[i]!=="auto"});hn(t,e,{type:"box",ignoreSize:n})}const mr=gr;var yr=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,o,n){var i=this.group;i.removeAll();var r=a.coordinateSystem,s=r.getRangeInfo(),l=r.getOrient(),u=o.getLocaleModel();this._renderDayRect(a,s,i),this._renderLines(a,s,l,i),this._renderYearText(a,s,l,i),this._renderMonthText(a,u,l,i),this._renderWeekText(a,u,s,l,i)},e.prototype._renderDayRect=function(a,o,n){for(var i=a.coordinateSystem,r=a.getModel("itemStyle").getItemStyle(),s=i.getCellWidth(),l=i.getCellHeight(),u=o.start.time;u<=o.end.time;u=i.getNextNDay(u,1).time){var c=i.dataToRect([u],!1).tl,d=new _t({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:r});n.add(d)}},e.prototype._renderLines=function(a,o,n,i){var r=this,s=a.coordinateSystem,l=a.getModel(["splitLine","lineStyle"]).getLineStyle(),u=a.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=o.start,p=0;d.time<=o.end.time;p++){g(d.formatedDate),p===0&&(d=s.getDateInfo(o.start.y+"-"+o.start.m));var f=d.date;f.setMonth(f.getMonth()+1),d=s.getDateInfo(f)}g(s.getNextNDay(o.end.time,1).formatedDate);function g(h){r._firstDayOfMonth.push(s.getDateInfo(h)),r._firstDayPoints.push(s.dataToRect([h],!1).tl);var v=r._getLinePointsOfOneWeek(a,h,n);r._tlpoints.push(v[0]),r._blpoints.push(v[v.length-1]),u&&r._drawSplitline(v,l,i)}u&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,c,n),l,i),u&&this._drawSplitline(r._getEdgesPoints(r._blpoints,c,n),l,i)},e.prototype._getEdgesPoints=function(a,o,n){var i=[a[0].slice(),a[a.length-1].slice()],r=n==="horizontal"?0:1;return i[0][r]=i[0][r]-o/2,i[1][r]=i[1][r]+o/2,i},e.prototype._drawSplitline=function(a,o,n){var i=new Xa({z2:20,shape:{points:a},style:o});n.add(i)},e.prototype._getLinePointsOfOneWeek=function(a,o,n){for(var i=a.coordinateSystem,r=i.getDateInfo(o),s=[],l=0;l<7;l++){var u=i.getNextNDay(r.time,l),c=i.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[n==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(a,o){return de(a)&&a?fn(a,o):$e(a)?a(o):o.nameMap},e.prototype._yearTextPositionControl=function(a,o,n,i,r){var s=o[0],l=o[1],u=["center","bottom"];i==="bottom"?(l+=r,u=["center","top"]):i==="left"?s-=r:i==="right"?(s+=r,u=["center","top"]):l-=r;var c=0;return(i==="left"||i==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},e.prototype._renderYearText=function(a,o,n,i){var r=a.getModel("yearLabel");if(r.get("show")){var s=r.get("margin"),l=r.get("position");l||(l=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,d=(u[0][1]+u[1][1])/2,p=n==="horizontal"?0:1,f={top:[c,u[p][1]],bottom:[c,u[1-p][1]],left:[u[1-p][0],d],right:[u[p][0],d]},g=o.start.y;+o.end.y>+o.start.y&&(g=g+"-"+o.end.y);var h=r.get("formatter"),v={start:o.start.y,end:o.end.y,nameMap:g},m=this._formatterLabel(h,v),_=new Ce({z2:30,style:Se(r,{text:m})});_.attr(this._yearTextPositionControl(_,f[l],n,l,s)),i.add(_)}},e.prototype._monthTextPositionControl=function(a,o,n,i,r){var s="left",l="top",u=a[0],c=a[1];return n==="horizontal"?(c=c+r,o&&(s="center"),i==="start"&&(l="bottom")):(u=u+r,o&&(l="middle"),i==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(a,o,n,i){var r=a.getModel("monthLabel");if(r.get("show")){var s=r.get("nameMap"),l=r.get("margin"),u=r.get("position"),c=r.get("align"),d=[this._tlpoints,this._blpoints];(!s||de(s))&&(s&&(o=aa(s)||o),s=o.get(["time","monthAbbr"])||[]);var p=u==="start"?0:1,f=n==="horizontal"?0:1;l=u==="start"?-l:l;for(var g=c==="center",h=0;h<d[p].length-1;h++){var v=d[p][h].slice(),m=this._firstDayOfMonth[h];if(g){var _=this._firstDayPoints[h];v[f]=(_[f]+d[0][h+1][f])/2}var b=r.get("formatter"),y=s[+m.m-1],w={yyyy:m.y,yy:(m.y+"").slice(2),MM:m.m,M:+m.m,nameMap:y},C=this._formatterLabel(b,w),O=new Ce({z2:30,style:we(Se(r,{text:C}),this._monthTextPositionControl(v,g,n,u,l))});i.add(O)}}},e.prototype._weekTextPositionControl=function(a,o,n,i,r){var s="center",l="middle",u=a[0],c=a[1],d=n==="start";return o==="horizontal"?(u=u+i+(d?1:-1)*r[0]/2,s=d?"right":"left"):(c=c+i+(d?1:-1)*r[1]/2,l=d?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(a,o,n,i,r){var s=a.getModel("dayLabel");if(s.get("show")){var l=a.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),d=s.get("margin"),p=l.getFirstDayOfWeek();if(!c||de(c)){c&&(o=aa(c)||o);var f=o.get(["time","dayOfWeekShort"]);c=f||Y(o.get(["time","dayOfWeekAbbr"]),function(w){return w[0]})}var g=l.getNextNDay(n.end.time,7-n.lweek).time,h=[l.getCellWidth(),l.getCellHeight()];d=Ge(d,Math.min(h[1],h[0])),u==="start"&&(g=l.getNextNDay(n.start.time,-(7+n.fweek)).time,d=-d);for(var v=0;v<7;v++){var m=l.getNextNDay(g,v),_=l.dataToRect([m.time],!1).center,b=v;b=Math.abs((v+p)%7);var y=new Ce({z2:30,style:we(Se(s,{text:c[b]}),this._weekTextPositionControl(_,i,u,d,h))});r.add(y)}}},e.type="calendar",e}(zt);const _r=yr;var ct=864e5,br=function(){function t(e,a,o){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(e){e=vn(e);var a=e.getFullYear(),o=e.getMonth()+1,n=o<10?"0"+o:""+o,i=e.getDate(),r=i<10?"0"+i:""+i,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:a+"",m:n,d:r,day:s,time:e.getTime(),formatedDate:a+"-"+n+"-"+r,date:e}},t.prototype.getNextNDay=function(e,a){return a=a||0,a===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+a),this.getDateInfo(e))},t.prototype.update=function(e,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,n=["width","height"],i=this._model.getCellSize().slice(),r=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[o,7]:[7,o];A([0,1],function(d){c(i,d)&&(r[n[d]]=i[d]*s[d])});var l={width:a.getWidth(),height:a.getHeight()},u=this._rect=ao(r,l);A([0,1],function(d){c(i,d)||(i[d]=u[n[d]]/s[d])});function c(d,p){return d[p]!=null&&d[p]!=="auto"}this._sw=i[0],this._sh=i[1]},t.prototype.dataToPoint=function(e,a){ae(e)&&(e=e[0]),a==null&&(a=!0);var o=this.getDateInfo(e),n=this._rangeInfo,i=o.formatedDate;if(a&&!(o.time>=n.start.time&&o.time<n.end.time+ct))return[NaN,NaN];var r=o.day,s=this._getRangeInfo([n.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+r*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]},t.prototype.pointToData=function(e){var a=this.pointToDate(e);return a&&a.time},t.prototype.dataToRect=function(e,a){var o=this.dataToPoint(e,a);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},t.prototype.pointToDate=function(e){var a=Math.floor((e[0]-this._rect.x)/this._sw)+1,o=Math.floor((e[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,a-1,n):this._getDateByWeeksAndDay(a,o-1,n)},t.prototype.convertToPixel=function(e,a,o){var n=ya(a);return n===this?n.dataToPoint(o):null},t.prototype.convertFromPixel=function(e,a,o){var n=ya(a);return n===this?n.pointToData(o):null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var e=this._model.get("range"),a;if(ae(e)&&e.length===1&&(e=e[0]),ae(e))a=e;else{var o=e.toString();if(/^\d{4}$/.test(o)&&(a=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var n=this.getDateInfo(o),i=n.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);a=[n.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(a=[o,o])}if(!a)return e;var s=this._getRangeInfo(a);return s.start.time>s.end.time&&a.reverse(),a},t.prototype._getRangeInfo=function(e){var a=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],o;a[0].time>a[1].time&&(o=!0,a.reverse());var n=Math.floor(a[1].time/ct)-Math.floor(a[0].time/ct)+1,i=new Date(a[0].time),r=i.getDate(),s=a[1].date.getDate();i.setDate(r+n-1);var l=i.getDate();if(l!==s)for(var u=i.getTime()-a[1].time>0?1:-1;(l=i.getDate())!==s&&(i.getTime()-a[1].time)*u>0;)n-=u,i.setDate(l-u);var c=Math.floor((n+a[0].day+6)/7),d=o?-c+1:c-1;return o&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:n,weeks:c,nthWeek:d,fweek:a[0].day,lweek:a[1].day}},t.prototype._getDateByWeeksAndDay=function(e,a,o){var n=this._getRangeInfo(o);if(e>n.weeks||e===0&&a<n.fweek||e===n.weeks&&a>n.lweek)return null;var i=(e-1)*7-n.fweek+a,r=new Date(n.start.time);return r.setDate(+n.start.d+i),this.getDateInfo(r)},t.create=function(e,a){var o=[];return e.eachComponent("calendar",function(n){var i=new t(n);o.push(i),n.coordinateSystem=i}),e.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=o[n.get("calendarIndex")||0])}),o},t.dimensions=["time","value"],t}();function ya(t){var e=t.calendarModel,a=t.seriesModel,o=e?e.coordinateSystem:a?a.coordinateSystem:null;return o}const xr=br;function Cr(t){t.registerComponentModel(mr),t.registerComponentView(_r),t.registerCoordinateSystem("calendar",xr)}var Sr=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="dataZoom.select",e}(ni);const wr=Sr;var Pr=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="dataZoom.select",e}(ii);const Ar=Pr;function Tr(t){t.registerComponentModel(wr),t.registerComponentView(Ar),ri(t)}var te=function(){function t(){}return t}(),xo={};function Be(t,e){xo[t]=e}function Co(t){return xo[t]}var Dr=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;A(this.option.feature,function(o,n){var i=Co(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(a)),ue(o,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Nt);const Or=Dr;var Ir=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(a,o,n,i){var r=this.group;if(r.removeAll(),!a.get("show"))return;var s=+a.get("itemSize"),l=a.get("orient")==="vertical",u=a.get("feature")||{},c=this._features||(this._features={}),d=[];A(u,function(g,h){d.push(h)}),new Ja(this._featureNames||[],d).add(p).update(p).remove(X(p,null)).execute(),this._featureNames=d;function p(g,h){var v=d[g],m=d[h],_=u[v],b=new gn(_,a,a.ecModel),y;if(i&&i.newTitle!=null&&i.featureName===v&&(_.title=i.newTitle),v&&!m){if(kr(v))y={onclick:b.option.onclick,featureName:v};else{var w=Co(v);if(!w)return;y=new w}c[v]=y}else if(y=c[m],!y)return;y.uid=mn("toolbox-feature"),y.model=b,y.ecModel=o,y.api=n;var C=y instanceof te;if(!v&&m){C&&y.dispose&&y.dispose(o,n);return}if(!b.get("show")||C&&y.unusable){C&&y.remove&&y.remove(o,n);return}f(b,y,v),b.setIconStatus=function(O,I){var k=this.option,S=this.iconPaths;k.iconStatus=k.iconStatus||{},k.iconStatus[O]=I,S[O]&&(I==="emphasis"?oa:na)(S[O])},y instanceof te&&y.render&&y.render(b,o,n,i)}function f(g,h,v){var m=g.getModel("iconStyle"),_=g.getModel(["emphasis","iconStyle"]),b=h instanceof te&&h.getIcons?h.getIcons():g.get("icon"),y=g.get("title")||{},w,C;de(b)?(w={},w[v]=b):w=b,de(y)?(C={},C[v]=y):C=y;var O=g.iconPaths={};A(w,function(I,k){var S=oo(I,{},{x:-s/2,y:-s/2,width:s,height:s});S.setStyle(m.getItemStyle());var T=S.ensureState("emphasis");T.style=_.getItemStyle();var W=new Ce({style:{text:C[k],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null},ignore:!0});S.setTextContent(W),yn({el:S,componentModel:a,itemName:k,formatterParamsExtra:{title:C[k]}}),S.__title=C[k],S.on("mouseover",function(){var Z=_.getItemStyle(),U=l?a.get("right")==null&&a.get("left")!=="right"?"right":"left":a.get("bottom")==null&&a.get("top")!=="bottom"?"bottom":"top";W.setStyle({fill:_.get("textFill")||Z.fill||Z.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),S.setTextConfig({position:_.get("textPosition")||U}),W.ignore=!a.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){g.get(["iconStatus",k])!=="emphasis"&&n.leaveEmphasis(this),W.hide()}),(g.get(["iconStatus",k])==="emphasis"?oa:na)(S),r.add(S),S.on("click",ie(h.onclick,h,o,n,k)),O[k]=S})}_n(r,a,n),r.add(bn(r.getBoundingRect(),a)),l||r.eachChild(function(g){var h=g.__title,v=g.ensureState("emphasis"),m=v.textConfig||(v.textConfig={}),_=g.getTextContent(),b=_&&_.ensureState("emphasis");if(b&&!$e(b)&&h){var y=b.style||(b.style={}),w=xn(h,Ce.makeFont(y)),C=g.x+r.x,O=g.y+r.y+s,I=!1;O+w.height>n.getHeight()&&(m.position="top",I=!0);var k=I?-5-w.height:s+10;C+w.width/2>n.getWidth()?(m.position=["100%",k],y.align="right"):C-w.width/2<0&&(m.position=[0,k],y.align="left")}})},e.prototype.updateView=function(a,o,n,i){A(this._features,function(r){r instanceof te&&r.updateView&&r.updateView(r.model,o,n,i)})},e.prototype.remove=function(a,o){A(this._features,function(n){n instanceof te&&n.remove&&n.remove(a,o)}),this.group.removeAll()},e.prototype.dispose=function(a,o){A(this._features,function(n){n instanceof te&&n.dispose&&n.dispose(a,o)})},e.type="toolbox",e}(zt);function kr(t){return t.indexOf("my")===0}const Lr=Ir;var Mr=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(a,o){var n=this.model,i=n.get("name")||a.get("title.0.text")||"echarts",r=o.getZr().painter.getType()==="svg",s=r?"svg":n.get("type",!0)||"png",l=o.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=Cn.browser;if($e(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=i+"."+s,c.target="_blank",c.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||r){var p=l.split(","),f=p[0].indexOf("base64")>-1,g=r?decodeURIComponent(p[1]):p[1];f&&(g=window.atob(g));var h=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var v=g.length,m=new Uint8Array(v);v--;)m[v]=g.charCodeAt(v);var _=new Blob([m]);window.navigator.msSaveOrOpenBlob(_,h)}else{var b=document.createElement("iframe");document.body.appendChild(b);var y=b.contentWindow,w=y.document;w.open("image/svg+xml","replace"),w.write(g),w.close(),y.focus(),w.execCommand("SaveAs",!0,h),document.body.removeChild(b)}}else{var C=n.get("lang"),O='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',I=window.open();I.document.write(O),I.document.title=i}},e.getDefaultOption=function(a){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},e}(te);const Br=Mr;var _a="__ec_magicType_stack__",Vr=[["line","bar"],["stack"]],Nr=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getIcons=function(){var a=this.model,o=a.get("icon"),n={};return A(a.get("type"),function(i){o[i]&&(n[i]=o[i])}),n},e.getDefaultOption=function(a){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},e.prototype.onclick=function(a,o,n){var i=this.model,r=i.get(["seriesIndex",n]);if(ba[n]){var s={series:[]},l=function(d){var p=d.subType,f=d.id,g=ba[n](p,f,d,i);g&&(Te(g,d.option),s.series.push(g));var h=d.coordinateSystem;if(h&&h.type==="cartesian2d"&&(n==="line"||n==="bar")){var v=h.getAxesByScale("ordinal")[0];if(v){var m=v.dim,_=m+"Axis",b=d.getReferringComponents(_,Sn).models[0],y=b.componentIndex;s[_]=s[_]||[];for(var w=0;w<=y;w++)s[_][y]=s[_][y]||{};s[_][y].boundaryGap=n==="bar"}}};A(Vr,function(d){Re(d,n)>=0&&A(d,function(p){i.setIconStatus(p,"normal")})}),i.setIconStatus(n,"emphasis"),a.eachComponent({mainType:"series",query:r==null?null:{seriesIndex:r}},l);var u,c=n;n==="stack"&&(u=ue({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",n])!=="emphasis"&&(c="tiled")),o.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e}(te),ba={line:function(t,e,a,o){if(t==="bar")return ue({id:e,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(t,e,a,o){if(t==="line")return ue({id:e,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(t,e,a,o){var n=a.get("stack")===_a;if(t==="line"||t==="bar")return o.setIconStatus("stack",n?"normal":"emphasis"),ue({id:e,stack:n?"":_a},o.get(["option","stack"])||{},!0)}};Et({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});const zr=Nr;var Je=new Array(60).join("-"),Ae="	";function Er(t){var e={},a=[],o=[];return t.eachRawSeries(function(n){var i=n.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var r=i.getBaseAxis();if(r.type==="category"){var s=r.dim+"_"+r.index;e[s]||(e[s]={categoryAxis:r,valueAxis:i.getOtherAxis(r),series:[]},o.push({axisDim:r.dim,axisIndex:r.index})),e[s].series.push(n)}else a.push(n)}else a.push(n)}),{seriesGroupByCategoryAxis:e,other:a,meta:o}}function $r(t){var e=[];return A(t,function(a,o){var n=a.categoryAxis,i=a.valueAxis,r=i.dim,s=[" "].concat(Y(a.series,function(f){return f.name})),l=[n.model.getCategories()];A(a.series,function(f){var g=f.getRawData();l.push(f.getRawData().mapArray(g.mapDimension(r),function(h){return h}))});for(var u=[s.join(Ae)],c=0;c<l[0].length;c++){for(var d=[],p=0;p<l.length;p++)d.push(l[p][c]);u.push(d.join(Ae))}e.push(u.join(`
`))}),e.join(`

`+Je+`

`)}function Rr(t){return Y(t,function(e){var a=e.getRawData(),o=[e.name],n=[];return a.each(a.dimensions,function(){for(var i=arguments.length,r=arguments[i-1],s=a.getName(r),l=0;l<i-1;l++)n[l]=arguments[l];o.push((s?s+Ae:"")+n.join(Ae))}),o.join(`
`)}).join(`

`+Je+`

`)}function Fr(t){var e=Er(t);return{value:Pn([$r(e.seriesGroupByCategoryAxis),Rr(e.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join(`

`+Je+`

`),meta:e.meta}}function qe(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Wr(t){var e=t.slice(0,t.indexOf(`
`));if(e.indexOf(Ae)>=0)return!0}var At=new RegExp("["+Ae+"]+","g");function Zr(t){for(var e=t.split(/\n+/g),a=qe(e.shift()).split(At),o=[],n=Y(a,function(l){return{name:l,data:[]}}),i=0;i<e.length;i++){var r=qe(e[i]).split(At);o.push(r.shift());for(var s=0;s<r.length;s++)n[s]&&(n[s].data[i]=r[s])}return{series:n,categories:o}}function Ur(t){for(var e=t.split(/\n+/g),a=qe(e.shift()),o=[],n=0;n<e.length;n++){var i=qe(e[n]);if(i){var r=i.split(At),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),o[n]={name:s,value:[]},l=o[n].value):l=o[n]=[];for(var c=0;c<r.length;c++)l.push(+r[c]);l.length===1&&(u?o[n].value=l[0]:o[n]=l[0])}}return{name:a,data:o}}function Hr(t,e){var a=t.split(new RegExp(`
*`+Je+`
*`,"g")),o={series:[]};return A(a,function(n,i){if(Wr(n)){var r=Zr(n),s=e[i],l=s.axisDim+"Axis";s&&(o[l]=o[l]||[],o[l][s.axisIndex]={data:r.categories},o.series=o.series.concat(r.series))}else{var r=Ur(n);o.series.push(r)}}),o}var Gr=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(a,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var n=o.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var d=i.get("optionToContent"),p=i.get("contentToOption"),f=Fr(a);if($e(d)){var g=d(o.getOption());de(g)?u.innerHTML=g:wn(g)&&u.appendChild(g)}else{c.readOnly=i.get("readOnly");var h=c.style;h.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",h.color=i.get("textColor"),h.borderColor=i.get("textareaBorderColor"),h.backgroundColor=i.get("textareaColor"),c.value=f.value,u.appendChild(c)}var v=f.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),y=document.createElement("div");_+=";background-color:"+i.get("buttonColor"),_+=";color:"+i.get("buttonTextColor");var w=this;function C(){n.removeChild(r),w._dom=null}ia(b,"click",C),ia(y,"click",function(){if(p==null&&d!=null||p!=null&&d==null){C();return}var O;try{$e(p)?O=p(u,o.getOption()):O=Hr(c.value,v)}catch(I){throw C(),new Error("Data view format error "+I)}O&&o.dispatchAction({type:"changeDataView",newOption:O}),C()}),b.innerHTML=l[1],y.innerHTML=l[2],y.style.cssText=b.style.cssText=_,!i.get("readOnly")&&m.appendChild(y),m.appendChild(b),r.appendChild(s),r.appendChild(u),r.appendChild(m),u.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},e.prototype.remove=function(a,o){this._dom&&o.getDom().removeChild(this._dom)},e.prototype.dispose=function(a,o){this.remove(a,o)},e.getDefaultOption=function(a){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return o},e}(te);function jr(t,e){return Y(t,function(a,o){var n=e&&e[o];if(Ee(n)&&!ae(n)){var i=Ee(a)&&!ae(a);i||(a={value:a});var r=n.name!=null&&a.name==null;return a=Te(a,n),r&&delete a.name,a}else return a})}Et({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var a=[];A(t.newOption.series,function(o){var n=e.getSeriesByName(o.name)[0];if(!n)a.push(we({type:"scatter"},o));else{var i=n.get("data");a.push({name:o.name,data:jr(o.data,i)})}}),e.mergeOption(Te({series:a},t.newOption))});const qr=Gr;var So=A,wo=no();function Yr(t,e){var a=Ht(t);So(e,function(o,n){for(var i=a.length-1;i>=0;i--){var r=a[i];if(r[n])break}if(i<0){var s=t.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();a[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),a.push(e)}function Kr(t){var e=Ht(t),a=e[e.length-1];e.length>1&&e.pop();var o={};return So(a,function(n,i){for(var r=e.length-1;r>=0;r--)if(n=e[r][i],n){o[i]=n;break}}),o}function Jr(t){wo(t).snapshots=null}function Xr(t){return Ht(t).length}function Ht(t){var e=wo(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var Qr=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(a,o){Jr(a),o.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(a){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])};return o},e}(te);Et({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});const es=Qr;var ts=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],as=function(){function t(e,a,o){var n=this;this._targetInfoList=[];var i=xa(a,e);A(os,function(r,s){(!o||!o.include||Re(o.include,s)>=0)&&r(i,n._targetInfoList)})}return t.prototype.setOutputRanges=function(e,a){return this.matchOutputRanges(e,a,function(o,n,i){if((o.coordRanges||(o.coordRanges=[])).push(n),!o.coordRange){o.coordRange=n;var r=dt[o.brushType](0,i,n);o.__rangeOffset={offset:Pa[o.brushType](r.values,o.range,[1,1]),xyMinMax:r.xyMinMax}}}),e},t.prototype.matchOutputRanges=function(e,a,o){A(e,function(n){var i=this.findTargetInfo(n,a);i&&i!==!0&&A(i.coordSyses,function(r){var s=dt[n.brushType](1,r,n.range,!0);o(n,s.values,r,a)})},this)},t.prototype.setInputRanges=function(e,a){A(e,function(o){var n=this.findTargetInfo(o,a);if(o.range=o.range||[],n&&n!==!0){o.panelId=n.panelId;var i=dt[o.brushType](0,n.coordSys,o.coordRange),r=o.__rangeOffset;o.range=r?Pa[o.brushType](i.values,r.offset,ns(i.xyMinMax,r.xyMinMax)):i.values}},this)},t.prototype.makePanelOpts=function(e,a){return Y(this._targetInfoList,function(o){var n=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:a?a(o):null,clipPath:Gi(n),isTargetByCursor:qi(n,e,o.coordSysModel),getLinearBrushOtherExtent:ji(n)}})},t.prototype.controlSeries=function(e,a,o){var n=this.findTargetInfo(e,o);return n===!0||n&&Re(n.coordSyses,a.coordinateSystem)>=0},t.prototype.findTargetInfo=function(e,a){for(var o=this._targetInfoList,n=xa(a,e),i=0;i<o.length;i++){var r=o[i],s=e.panelId;if(s){if(r.panelId===s)return r}else for(var l=0;l<Ca.length;l++)if(Ca[l](n,r))return r}return!0},t}();function Tt(t){return t[0]>t[1]&&t.reverse(),t}function xa(t,e){return io(t,e,{includeMainTypes:ts})}var os={grid:function(t,e){var a=t.xAxisModels,o=t.yAxisModels,n=t.gridModels,i=An(),r={},s={};!a&&!o&&!n||(A(a,function(l){var u=l.axis.grid.model;i.set(u.id,u),r[u.id]=!0}),A(o,function(l){var u=l.axis.grid.model;i.set(u.id,u),s[u.id]=!0}),A(n,function(l){i.set(l.id,l),r[l.id]=!0,s[l.id]=!0}),i.each(function(l){var u=l.coordinateSystem,c=[];A(u.getCartesians(),function(d,p){(Re(a,d.getAxis("x").model)>=0||Re(o,d.getAxis("y").model)>=0)&&c.push(d)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:Sa.grid,xAxisDeclared:r[l.id],yAxisDeclared:s[l.id]})}))},geo:function(t,e){A(t.geoModels,function(a){var o=a.coordinateSystem;e.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:o,coordSyses:[o],getPanelRect:Sa.geo})})}},Ca=[function(t,e){var a=t.xAxisModel,o=t.yAxisModel,n=t.gridModel;return!n&&a&&(n=a.axis.grid.model),!n&&o&&(n=o.axis.grid.model),n&&n===e.gridModel},function(t,e){var a=t.geoModel;return a&&a===e.geoModel}],Sa={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Qa(t)),e}},dt={lineX:X(wa,0),lineY:X(wa,1),rect:function(t,e,a,o){var n=t?e.pointToData([a[0][0],a[1][0]],o):e.dataToPoint([a[0][0],a[1][0]],o),i=t?e.pointToData([a[0][1],a[1][1]],o):e.dataToPoint([a[0][1],a[1][1]],o),r=[Tt([n[0],i[0]]),Tt([n[1],i[1]])];return{values:r,xyMinMax:r}},polygon:function(t,e,a,o){var n=[[1/0,-1/0],[1/0,-1/0]],i=Y(a,function(r){var s=t?e.pointToData(r,o):e.dataToPoint(r,o);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:i,xyMinMax:n}}};function wa(t,e,a,o){var n=a.getAxis(["x","y"][t]),i=Tt(Y([0,1],function(s){return e?n.coordToData(n.toLocalCoord(o[s]),!0):n.toGlobalCoord(n.dataToCoord(o[s]))})),r=[];return r[t]=i,r[1-t]=[NaN,NaN],{values:i,xyMinMax:r}}var Pa={lineX:X(Aa,0),lineY:X(Aa,1),rect:function(t,e,a){return[[t[0][0]-a[0]*e[0][0],t[0][1]-a[0]*e[0][1]],[t[1][0]-a[1]*e[1][0],t[1][1]-a[1]*e[1][1]]]},polygon:function(t,e,a){return Y(t,function(o,n){return[o[0]-a[0]*e[n][0],o[1]-a[1]*e[n][1]]})}};function Aa(t,e,a,o){return[e[0]-o[t]*a[0],e[1]-o[t]*a[1]]}function ns(t,e){var a=Ta(t),o=Ta(e),n=[a[0]/o[0],a[1]/o[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function Ta(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}const Po=as;var Dt=A,is=Dn("toolbox-dataZoom_"),rs=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(a,o,n,i){this._brushController||(this._brushController=new Hi(n.getZr()),this._brushController.on("brush",ie(this._onBrush,this)).mount()),us(a,o,this,i,n),ls(a,o)},e.prototype.onclick=function(a,o,n){ss[n].call(this)},e.prototype.remove=function(a,o){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(a,o){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(a){var o=a.areas;if(!a.isEnd||!o.length)return;var n={},i=this.ecModel;this._brushController.updateCovers([]);var r=new Po(Gt(this.model),i,{include:["grid"]});r.matchOutputRanges(o,i,function(u,c,d){if(d.type==="cartesian2d"){var p=u.brushType;p==="rect"?(s("x",d,c[0]),s("y",d,c[1])):s({lineX:"x",lineY:"y"}[p],d,c)}}),Yr(i,n),this._dispatchZoomAction(n);function s(u,c,d){var p=c.getAxis(u),f=p.model,g=l(u,f,i),h=g.findRepresentativeAxisProxy(f).getMinMaxSpan();(h.minValueSpan!=null||h.maxValueSpan!=null)&&(d=si(0,d.slice(),p.scale.getExtent(),0,h.minValueSpan,h.maxValueSpan)),g&&(n[g.id]={dataZoomId:g.id,startValue:d[0],endValue:d[1]})}function l(u,c,d){var p;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var g=f.getAxisModel(u,c.componentIndex);g&&(p=f)}),p}},e.prototype._dispatchZoomAction=function(a){var o=[];Dt(a,function(n,i){o.push(ce(n))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},e.getDefaultOption=function(a){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return o},e}(te),ss={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(Kr(this.ecModel))}};function Gt(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function ls(t,e){t.setIconStatus("back",Xr(e)>1?"emphasis":"normal")}function us(t,e,a,o,n){var i=a._isZoomActive;o&&o.type==="takeGlobalCursor"&&(i=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),a._isZoomActive=i,t.setIconStatus("zoom",i?"emphasis":"normal");var r=new Po(Gt(t),e,{include:["grid"]}),s=r.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}Tn("dataZoom",function(t){var e=t.getComponent("toolbox",0),a=["feature","dataZoom"];if(!e||e.get(a)==null)return;var o=e.getModel(a),n=[],i=Gt(o),r=io(t,i);Dt(r.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),Dt(r.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var d=l.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:is+u+d};p[c]=d,n.push(p)}return n});const cs=rs;function ds(t){t.registerComponentModel(Or),t.registerComponentView(Lr),Be("saveAsImage",Br),Be("magicType",zr),Be("dataView",qr),Be("dataZoom",cs),Be("restore",es),Vt(Tr)}var ps=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.layoutMode="box",a}return e.prototype.init=function(a,o,n){this.mergeDefaultAndTheme(a,n),this._initData()},e.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(a){a==null&&(a=this.option.currentIndex);var o=this._data.count();this.option.loop?a=(a%o+o)%o:(a>=o&&(a=o-1),a<0&&(a=0)),this.option.currentIndex=a},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(a){this.option.autoPlay=!!a},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var a=this.option,o=a.data||[],n=a.axisType,i=this._names=[],r;n==="category"?(r=[],A(o,function(u,c){var d=On(In(u),""),p;Ee(u)?(p=ce(u),p.value=c):p=c,r.push(p),i.push(d)})):r=o;var s={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new kn([{name:"value",type:s}],this);l.initData(r,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Nt);const Da=ps;var Ao=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="timeline.slider",e.defaultOption=Ln(Da.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(Da);eo(Ao,Mn.prototype);const hs=Ao;var fs=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="timeline",e}(zt);const vs=fs;var gs=function(t){V(e,t);function e(a,o,n,i){var r=t.call(this,a,o,n)||this;return r.type=i||"value",r}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(li);const ms=gs;var pt=Math.PI,Oa=no(),ys=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(a,o){this.api=o},e.prototype.render=function(a,o,n){if(this.model=a,this.api=n,this.ecModel=o,this.group.removeAll(),a.get("show",!0)){var i=this._layout(a,n),r=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(i,a);a.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return Bn("nameValue",{noName:!0,value:c})},A(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](i,r,l,a)},this),this._renderAxisLabel(i,s,l,a),this._position(i,a)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(a,o){var n=a.get(["label","position"]),i=a.get("orient"),r=bs(a,o),s;n==null||n==="auto"?s=i==="horizontal"?r.y+r.height/2<o.getHeight()/2?"-":"+":r.x+r.width/2<o.getWidth()/2?"+":"-":de(n)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]:s=n;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:pt/2},d=i==="vertical"?r.height:r.width,p=a.getModel("controlStyle"),f=p.get("show",!0),g=f?p.get("itemSize"):0,h=f?p.get("itemGap"):0,v=g+h,m=a.get(["label","rotate"])||0;m=m*pt/180;var _,b,y,w=p.get("position",!0),C=f&&p.get("showPlayBtn",!0),O=f&&p.get("showPrevBtn",!0),I=f&&p.get("showNextBtn",!0),k=0,S=d;w==="left"||w==="bottom"?(C&&(_=[0,0],k+=v),O&&(b=[k,0],k+=v),I&&(y=[S-g,0],S-=v)):(C&&(_=[S-g,0],S-=v),O&&(b=[0,0],k+=v),I&&(y=[S-g,0],S-=v));var T=[k,S];return a.get("inverse")&&T.reverse(),{viewRect:r,mainLength:d,orient:i,rotation:c[i],labelRotation:m,labelPosOpt:s,labelAlign:a.get(["label","align"])||l[i],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||u[i],playPosition:_,prevBtnPosition:b,nextBtnPosition:y,axisExtent:T,controlSize:g,controlGap:h}},e.prototype._position=function(a,o){var n=this._mainGroup,i=this._labelGroup,r=a.viewRect;if(a.orient==="vertical"){var s=Un(),l=r.x,u=r.y+r.height;ra(s,s,[-l,-u]),Vn(s,s,-pt/2),ra(s,s,[l,u]),r=r.clone(),r.applyTransform(s)}var c=_(r),d=_(n.getBoundingRect()),p=_(i.getBoundingRect()),f=[n.x,n.y],g=[i.x,i.y];g[0]=f[0]=c[0][0];var h=a.labelPosOpt;if(h==null||de(h)){var v=h==="+"?0:1;b(f,d,c,1,v),b(g,p,c,1,1-v)}else{var v=h>=0?0:1;b(f,d,c,1,v),g[1]=f[1]+h}n.setPosition(f),i.setPosition(g),n.rotation=i.rotation=a.rotation,m(n),m(i);function m(y){y.originX=c[0][0]-y.x,y.originY=c[1][0]-y.y}function _(y){return[[y.x,y.x+y.width],[y.y,y.y+y.height]]}function b(y,w,C,O,I){y[O]+=C[O][I]-w[O][I]}},e.prototype._createAxis=function(a,o){var n=o.getData(),i=o.get("axisType"),r=_s(o,i);r.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var s=n.getDataExtent("value");r.setExtent(s[0],s[1]),r.calcNiceTicks();var l=new ms("value",r,a.axisExtent,i);return l.model=o,l},e.prototype._createGroup=function(a){var o=this[a]=new Ze;return this.group.add(o),o},e.prototype._renderAxisLine=function(a,o,n,i){var r=n.getExtent();if(i.get(["lineStyle","show"])){var s=new sa({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:we({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(s);var l=this._progressLine=new sa({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:Te({lineCap:"round",lineWidth:s.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(l)}},e.prototype._renderAxisTick=function(a,o,n,i){var r=this,s=i.getData(),l=n.scale.getTicks();this._tickSymbols=[],A(l,function(u){var c=n.dataToCoord(u.value),d=s.getItemModel(u.value),p=d.getModel("itemStyle"),f=d.getModel(["emphasis","itemStyle"]),g=d.getModel(["progress","itemStyle"]),h={x:c,y:0,onclick:ie(r._changeTimeline,r,u.value)},v=Ia(d,p,o,h);v.ensureState("emphasis").style=f.getItemStyle(),v.ensureState("progress").style=g.getItemStyle(),nt(v);var m=Ya(v);d.get("tooltip")?(m.dataIndex=u.value,m.dataModel=i):m.dataIndex=m.dataModel=null,r._tickSymbols.push(v)})},e.prototype._renderAxisLabel=function(a,o,n,i){var r=this,s=n.getLabelModel();if(s.get("show")){var l=i.getData(),u=n.getViewLabels();this._tickLabels=[],A(u,function(c){var d=c.tickValue,p=l.getItemModel(d),f=p.getModel("label"),g=p.getModel(["emphasis","label"]),h=p.getModel(["progress","label"]),v=n.dataToCoord(c.tickValue),m=new Ce({x:v,y:0,rotation:a.labelRotation-a.rotation,onclick:ie(r._changeTimeline,r,d),silent:!1,style:Se(f,{text:c.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});m.ensureState("emphasis").style=Se(g),m.ensureState("progress").style=Se(h),o.add(m),nt(m),Oa(m).dataIndex=d,r._tickLabels.push(m)})}},e.prototype._renderControl=function(a,o,n,i){var r=a.controlSize,s=a.rotation,l=i.getModel("controlStyle").getItemStyle(),u=i.getModel(["emphasis","controlStyle"]).getItemStyle(),c=i.getPlayState(),d=i.get("inverse",!0);p(a.nextBtnPosition,"next",ie(this._changeTimeline,this,d?"-":"+")),p(a.prevBtnPosition,"prev",ie(this._changeTimeline,this,d?"+":"-")),p(a.playPosition,c?"stop":"play",ie(this._handlePlayClick,this,!c),!0);function p(f,g,h,v){if(f){var m=Nn(bt(i.get(["controlStyle",g+"BtnSize"]),r),r),_=[0,-m/2,m,m],b=xs(i,g+"Icon",_,{x:f[0],y:f[1],originX:r/2,originY:0,rotation:v?-s:0,rectHover:!0,style:l,onclick:h});b.ensureState("emphasis").style=u,o.add(b),nt(b)}}},e.prototype._renderCurrentPointer=function(a,o,n,i){var r=i.getData(),s=i.getCurrentIndex(),l=r.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(d){d.draggable=!0,d.drift=ie(u._handlePointerDrag,u),d.ondragend=ie(u._handlePointerDragend,u),ka(d,u._progressLine,s,n,i,!0)},onUpdate:function(d){ka(d,u._progressLine,s,n,i)}};this._currentPointer=Ia(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},e.prototype._handlePointerDrag=function(a,o,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},e.prototype._pointerChangeTimeline=function(a,o){var n=this._toAxisCoord(a)[0],i=this._axis,r=zn(i.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=n,s.dirty());var l=this._findNearestTick(n),u=this.model;(o||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=a.model;a._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(a){var o=this._mainGroup.getLocalTransform();return En(a,o,!0)},e.prototype._findNearestTick=function(a){var o=this.model.getData(),n=1/0,i,r=this._axis;return o.each(["value"],function(s,l){var u=r.dataToCoord(s),c=Math.abs(u-a);c<n&&(n=c,i=l)}),i},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(a){var o=this.model.getCurrentIndex();a==="+"?a=o+1:a==="-"&&(a=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},e.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),o=this._tickSymbols,n=this._tickLabels;if(o)for(var i=0;i<o.length;i++)o&&o[i]&&o[i].toggleState("progress",i<a);if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",Oa(n[i]).dataIndex<=a)},e.type="timeline.slider",e}(vs);function _s(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new Fn({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new Rn({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new $n}}function bs(t,e){return ao(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function xs(t,e,a,o){var n=o.style,i=oo(t.get(["controlStyle",e]),o||{},new Mt(a[0],a[1],a[2],a[3]));return n&&i.setStyle(n),i}function Ia(t,e,a,o,n,i){var r=e.get("color");if(n)n.setColor(r),a.add(n),i&&i.onUpdate(n);else{var s=t.get("symbol");n=qa(s,-1,-1,2,2,r),n.setStyle("strokeNoScale",!0),a.add(n),i&&i.onCreate(n)}var l=e.getItemStyle(["color"]);n.setStyle(l),o=ue({rectHover:!0,z2:100},o,!0);var u=Wn(t.get("symbolSize"));o.scaleX=u[0]/2,o.scaleY=u[1]/2;var c=Zn(t.get("symbolOffset"),u);c&&(o.x=(o.x||0)+c[0],o.y=(o.y||0)+c[1]);var d=t.get("symbolRotate");return o.rotation=(d||0)*Math.PI/180||0,n.attr(o),n.updateTransform(),n}function ka(t,e,a,o,n,i){if(!t.dragging){var r=n.getModel("checkpointStyle"),s=o.dataToCoord(n.getData().get("value",a));if(i||!r.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:r.get("animationDuration",!0),easing:r.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}const Cs=ys;function Ss(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,a,o){var n=a.getComponent("timeline");return n&&e.currentIndex!=null&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),a.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Te({currentIndex:n.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,a){var o=a.getComponent("timeline");o&&e.playState!=null&&o.setPlayState(e.playState)})}function ws(t){var e=t&&t.timeline;ae(e)||(e=e?[e]:[]),A(e,function(a){a&&Ps(a)})}function Ps(t){var e=t.type,a={number:"value",time:"time"};if(a[e]&&(t.axisType=a[e],delete t.type),La(t),ve(t,"controlPosition")){var o=t.controlStyle||(t.controlStyle={});ve(o,"position")||(o.position=t.controlPosition),o.position==="none"&&!ve(o,"show")&&(o.show=!1,delete o.position),delete t.controlPosition}A(t.data||[],function(n){Ee(n)&&!ae(n)&&(!ve(n,"value")&&ve(n,"name")&&(n.value=n.name),La(n))})}function La(t){var e=t.itemStyle||(t.itemStyle={}),a=e.emphasis||(e.emphasis={}),o=t.label||t.label||{},n=o.normal||(o.normal={}),i={normal:1,emphasis:1};A(o,function(r,s){!i[s]&&!ve(n,s)&&(n[s]=r)}),a.label&&!ve(o,"emphasis")&&(o.emphasis=a.label,delete a.label)}function ve(t,e){return t.hasOwnProperty(e)}function As(t){t.registerComponentModel(hs),t.registerComponentView(Cs),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),Ss(t),t.registerPreprocessor(ws)}const Ts={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ds=B("path",{fill:"currentColor",d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"},null,-1),Os=[Ds];function Is(t,e){return D(),M("svg",Ts,Os)}const ks={name:"mdi-cog",render:Is};function Ne(){return`#${(Math.random()*16777215<<0).toString(16)}`}function Ot(t,e,a,o,n=0){return{name:a,type:o.type||"line",xAxisIndex:n,yAxisIndex:n,itemStyle:{color:o.color||Ne()},encode:{x:t,y:e},showSymbol:!1}}function Ma(t,e,a,o,n=0){const i={type:le.line},r=Ot(t,e,a,i,n),s={stack:a,stackStrategy:"all",lineStyle:{opacity:0},showSymbol:!1,areaStyle:{color:o.color,opacity:.1},tooltip:{show:!1}};return Object.assign(r,s),r}function Ls(t,e){const a=t.indexOf("open"),o=t.indexOf("close"),n=t.indexOf("high"),i=t.indexOf("low");let r;return e.map((s,l)=>{const u=s.slice(),c=l===0?(u[a]+u[o])/2:(r[a]+r[o])/2,d=(u[a]+u[n]+u[i]+u[o])/4,p=Math.max(u[n],u[a],u[o]),f=Math.min(u[i],u[a],u[o]);return u[a]=c,u[o]=d,u[n]=p,u[i]=f,r=u.slice(),u})}const Ms=2,Bs=3;function be(t,e,a=Bs){const o=e%t;return e-o+(a===Ms?t:0)}function To(t,e){return`${e.ft_order_side==="buy"?"+":"-"}${Mo("cost"in e?e.cost:e.amount*e.safe_price,t.quote_currency??"<stake_currency>")}`}function Ba(t,e,a){return`${t.is_short?"Short":"Long"} ${a}  ${Wa(t.profit_ratio)}
  ${To(t,e)}
  Enter-tag: ${t.enter_tag??""}
  Exit-Tag: ${t.exit_reason??""}`}function Vs(t,e){return`${t.is_short?"Short":"Long"} adjustment
  ${To(t,e)}
  Enter-tag: ${t.enter_tag??""}`}const Ns="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",Va="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",ht="#AD00FF",ft="#0066FF";function zs(t,e){const a=[];for(let o=0,n=e.length;o<n;o+=1){const i=e[o];if((be(t.timeframe_ms??0,i.open_timestamp)<=t.data_stop_ts||!i.close_timestamp||i.close_timestamp&&i.close_timestamp>=t.data_start_ts)&&i.orders)for(let r=0;r<i.orders.length;r++){const s=i.orders[r];s.order_filled_timestamp&&be(t.timeframe_ms??0,s.order_filled_timestamp)<=t.data_stop_ts&&s.order_filled_timestamp>t.data_start_ts&&(r===0?a.push([be(t.timeframe_ms??0,i.open_timestamp),s.safe_price,Va,s.ft_order_side=="sell"?180:0,i.is_short?ht:ft,i.is_short?"Short":"Long",Ba(i,s,"entry")]):r===i.orders.length-1&&i.close_timestamp?be(t.timeframe_ms??0,i.close_timestamp)<=t.data_stop_ts&&i.close_timestamp>t.data_start_ts&&i.is_open===!1&&a.push([be(t.timeframe_ms??0,i.close_timestamp),s.safe_price,Va,i.is_short?0:180,i.is_short?ht:ft,Wa(i.profit_ratio,2),Ba(i,s,"exit")]):a.push([be(t.timeframe_ms??0,s.order_filled_timestamp),s.safe_price,Ns,s.ft_order_side=="sell"?180:0,i.is_short?ht:ft,"",Vs(i,s)]))}}return{tradeData:a}}function Es(t,e,a,o){const n=t.indexOf(a),i=t.indexOf(o);return t.push(`${a}-${o}`),e.map(r=>{const s=r.slice(),l=s===null||s[i]===null||s[n]===null?null:s[i]-s[n];return s.push(l),s})}function $s(t){const e=[];return"main_plot"in t&&Object.entries(t.main_plot).forEach(([a,o])=>{o.fill_to&&e.push([a,o.fill_to])}),"subplots"in t&&Object.values(t.subplots).forEach(a=>{Object.entries(a).forEach(([o,n])=>{n.fill_to&&e.push([o,n.fill_to])})}),e}const Rs={class:"d-flex flex-grow-1 chart-wrapper"},vt="5.5%",gt="1%",Na=55,Ve=8,Fs="#26A69A",Ws="#26A69A",Zs="#EF5350",Us="#EF5350",Hs="#00ff26",Gs="#00ff26",js="#faba25",qs="#faba25",Ys=ye({__name:"CandleChart",props:{trades:{required:!1,default:()=>[],type:Array},dataset:{required:!0,type:Object},heikinAshi:{required:!1,default:!1,type:Boolean},useUTC:{required:!1,default:!0,type:Boolean},plotConfig:{required:!0,type:Object},theme:{default:"dark",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(t){const e=t;Vt([Hn,Cr,Gn,ui,ci,jn,As,qn,ds,Yn,di,pi,vr,hi,fi,Ai,Kn]);const a=E(),o=E({}),n=R(()=>e.dataset?e.dataset.strategy:""),i=R(()=>e.dataset?e.dataset.pair:""),r=R(()=>e.dataset?e.dataset.timeframe:""),s=R(()=>e.dataset!==null&&typeof e.dataset=="object"),l=R(()=>e.trades.filter(g=>g.pair===i.value)),u=R(()=>`${n.value} - ${i.value} - ${r.value}`),c=R(()=>$s(e.plotConfig));function d(g=!1){var re,De,Ue,pe;if(!s.value)return;(re=o.value)!=null&&re.title&&(o.value.title[0].text=u.value);const h=e.dataset.columns,v=h.findIndex(x=>x==="__date_ts"),m=h.findIndex(x=>x==="open"),_=h.findIndex(x=>x==="high"),b=h.findIndex(x=>x==="low"),y=h.findIndex(x=>x==="close"),w=h.findIndex(x=>x==="volume"),C=h.findIndex(x=>x==="_buy_signal_close"||x==="_enter_long_signal_close"),O=h.findIndex(x=>x==="_sell_signal_close"||x==="_exit_long_signal_close"),I=h.findIndex(x=>x==="_enter_short_signal_close"),k=h.findIndex(x=>x==="_exit_short_signal_close"),S="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray((De=o.value)==null?void 0:De.dataZoom))if(g){const x=(1-250/e.dataset.length)*100;o.value.dataZoom.forEach(($,G)=>{o.value&&o.value.dataZoom&&(o.value.dataZoom[G].start=x)})}else o.value.dataZoom.forEach((x,$)=>{o.value&&o.value.dataZoom&&(delete o.value.dataZoom[$].start,delete o.value.dataZoom[$].end)});let T=e.heikinAshi?Ls(h,e.dataset.data):e.dataset.data.slice();c.value.forEach(([x,$])=>{T=Es(h,T,x,$)});const W=Array(T.length>0?T[T.length-2].length:0);W[v]=T[T.length-1][v]+e.dataset.timeframe_ms*3,T.push(W);const Z={dataset:{source:T},grid:[{left:vt,right:gt,bottom:`${S*Ve+2}%`},{left:vt,right:gt,bottom:`${S*Ve}%`,height:`${Ve}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:Fs,color0:Zs,borderColor:Ws,borderColor0:Us},encode:{x:v,y:[m,y,b,_]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:v,y:w}},{name:"Entry",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Hs},encode:{x:v,y:C}}]};if(O>=0&&Array.isArray(Z.series)&&Z.series.push({name:"Exit",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:js},encode:{x:v,y:O}}),Array.isArray(Z.series)&&(I>=0&&Z.series.push({name:"Entry",type:"scatter",symbol:"triangle",symbolRotate:180,symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Gs},tooltip:{},encode:{x:v,y:I}}),k>=0&&Z.series.push({name:"Exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:qs},tooltip:{},encode:{x:v,y:k}})),Object.assign(o.value,Z),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([x,$])=>{var j,N,he,Oe,Ie,ke,Le;const G=h.findIndex(fe=>fe===x);if(G>0){if(!Array.isArray((j=o.value)==null?void 0:j.legend)&&((he=(N=o.value)==null?void 0:N.legend)!=null&&he.data)&&o.value.legend.data.push(x),Array.isArray((Oe=o.value)==null?void 0:Oe.series)){if((Ie=o.value)==null||Ie.series.push(Ot(v,G,x,$)),$.fill_to){const fe=`${x}-${$.fill_to}`,Xe=h.findIndex(tt=>tt===fe),Qe={color:$.color,type:le.line},et=Ma(v,Xe,x,Qe,0);o.value.series[o.value.series.length-1].stack=x,o.value.series.push(et)}(Le=o.value)==null||Le.series.splice(((ke=o.value)==null?void 0:ke.series.length)-1,0)}}else console.log(`element ${x} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let x=2;Object.entries(e.plotConfig.subplots).forEach(([$,G])=>{const j=x;Array.isArray(o.value.yAxis)&&o.value.yAxis.length<=x&&o.value.yAxis.push({scale:!0,gridIndex:j,name:$,nameLocation:"middle",nameGap:Na,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(o.value.xAxis)&&o.value.xAxis.length<=x&&o.value.xAxis.push({type:"time",scale:!0,gridIndex:j,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(o.value.dataZoom)&&o.value.dataZoom.forEach(N=>N.xAxisIndex&&Array.isArray(N.xAxisIndex)?N.xAxisIndex.push(x):null),o.value.grid&&Array.isArray(o.value.grid)&&o.value.grid.push({left:vt,right:gt,bottom:`${(S-x+1)*Ve}%`,height:`${Ve}%`}),Object.entries(G).forEach(([N,he])=>{var Ie,ke,Le;const Oe=h.findIndex(fe=>fe===N);if(Oe>0){if(!Array.isArray(o.value.legend)&&((Ie=o.value.legend)!=null&&Ie.data)&&o.value.legend.data.push(N),o.value.series&&Array.isArray(o.value.series)){if(o.value.series.push(Ot(v,Oe,N,he,x)),he.fill_to){const fe=`${N}-${he.fill_to}`,Xe=h.findIndex(tt=>tt===fe),Qe={color:he.color,type:le.line},et=Ma(v,Xe,N,Qe,x);o.value.series[o.value.series.length-1].stack=N,o.value.series.push(et)}(Le=o.value)==null||Le.series.splice(((ke=o.value)==null?void 0:ke.series.length)-1,0)}}else console.log(`element ${N} was not found in the columns.`)}),x+=1})}Array.isArray(o.value.grid)&&(o.value.grid[o.value.grid.length-1].bottom="50px",delete o.value.grid[o.value.grid.length-1].top);const{tradeData:U}=zs(e.dataset,l.value),_e="Trades";!Array.isArray(o.value.legend)&&((Ue=o.value.legend)!=null&&Ue.data)&&o.value.legend.data.push(_e);const H={name:_e,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e.theme!=="dark"?"#fff":"#000",padding:2,color:e.theme==="dark"?"#fff":"#000"},labelLayout:{rotate:75,align:"left",dx:10},itemStyle:{color:x=>x.data[4],opacity:.9},symbol:x=>x[2],symbolRotate:x=>x[3],symbolSize:13,data:U};Array.isArray(o.value.series)&&o.value.series.push(H),(pe=a.value)==null||pe.setOption(o.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],noMerge:!g})}function p(){var g;(g=a.value)==null||g.setOption({},{noMerge:!0}),o.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(h,v,m,_,b){const y={top:60},w=h[0]<b.viewSize[0]/2;return y[["left","right"][+w]]=w?5:60,y}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:Na,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...vi}]},console.log("Initialized"),d(!0)}function f(){if(!e.sliderPosition)return;const g=Kt(e.sliderPosition.startValue-e.dataset.timeframe_ms*40,"yyyy-MM-dd HH:mm:ss"),h=Kt(e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80,"yyyy-MM-dd HH:mm:ss");a.value&&a.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:g,endValue:h})}return It(()=>{p()}),K(()=>e.useUTC,()=>p()),K(()=>e.dataset,()=>d()),K(()=>e.plotConfig,()=>p()),K(()=>e.heikinAshi,()=>d()),K(()=>e.sliderPosition,()=>f()),(g,h)=>(D(),M("div",Rs,[s.value?(D(),q(z(Jn),{key:0,ref_key:"candleChart",ref:a,theme:t.theme,autoresize:"","manual-update":""},null,8,["theme"])):F("",!0)]))}});const Ks=Ye(Ys,[["__scopeId","data-v-1c0c710c"]]),Js={class:"d-flex flex-row"},Xs={class:"flex-grow-1"},Do=ye({__name:"EditValue",props:{modelValue:{type:String,required:!0},allowEdit:{type:Boolean,default:!1},allowAdd:{type:Boolean,default:!1},editableName:{type:String,required:!0},alignVertical:{type:Boolean,default:!1}},emits:["delete","new","rename"],setup(t,{emit:e}){const a=t,o=E(!1),n=E(a.modelValue),i=E(!1);function r(){i.value=!1,o.value=!1,n.value=a.modelValue}function s(){n.value="",o.value=!0,i.value=!0}K(()=>a.modelValue,()=>{n.value=a.modelValue});function l(){i.value=!1,o.value?(o.value=!1,e("new",n.value)):e("rename",a.modelValue,n.value)}return(u,c)=>{const d=Za,p=Bo,f=We,g=Vo,h=mi,v=No,m=Ua;return D(),M("div",Js,[B("div",Xs,[i.value?(D(),q(d,{key:1,modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=_=>n.value=_),size:"sm"},null,8,["modelValue"])):J(u.$slots,"default",{key:0})]),B("div",{class:mt(["flex-grow-2 mt-auto d-flex gap-1 ms-1",t.alignVertical?"flex-column":"flex-row"])},[t.allowEdit&&!(o.value||i.value)?(D(),M(je,{key:0},[P(f,{size:"sm",variant:"secondary",title:`Edit this ${t.editableName}.`,onClick:c[1]||(c[1]=_=>i.value=!0)},{default:L(()=>[P(p)]),_:1},8,["title"]),P(f,{size:"sm",variant:"secondary",title:`Delete this ${t.editableName}.`,onClick:c[2]||(c[2]=_=>u.$emit("delete",t.modelValue))},{default:L(()=>[P(g)]),_:1},8,["title"])],64)):F("",!0),t.allowAdd&&!(o.value||i.value)?(D(),q(f,{key:1,size:"sm",title:`Add new ${t.editableName}.`,variant:"primary",onClick:s},{default:L(()=>[P(h)]),_:1},8,["title"])):F("",!0),o.value||i.value?(D(),M(je,{key:2},[P(f,{size:"sm",title:`Add new '${t.editableName}`,variant:"primary",onClick:l},{default:L(()=>[P(v)]),_:1},8,["title"]),P(f,{size:"sm",title:"Abort",class:"ms-1",variant:"secondary",onClick:r},{default:L(()=>[P(m)]),_:1})],64)):F("",!0)],2)])}}});function ze(t){return JSON.parse(JSON.stringify(t))}const Oo="ftPlotConfig";function Qs(){const t="ft_custom_plot_config",e="ft_selected_plot_config",a=JSON.parse(localStorage.getItem(t)||"{}");if(Object.keys(a).length>0){console.log("migrating plot configs");const o={customPlotConfigs:a,plotConfigName:localStorage.getItem(e)||"default"};localStorage.setItem(Oo,JSON.stringify(o)),localStorage.removeItem(t),localStorage.removeItem(e)}}Qs();const jt=zo("plotConfig",{state:()=>({customPlotConfigs:{},plotConfigName:"default",isEditing:!1,editablePlotConfig:{...it}}),getters:{availablePlotConfigNames:t=>Object.keys(t.customPlotConfigs),plotConfig:t=>(t.isEditing?t.editablePlotConfig:t.customPlotConfigs[t.plotConfigName])||ze(it)},actions:{saveCustomPlotConfig(t,e){this.customPlotConfigs[t]=e},deletePlotConfig(t){delete this.customPlotConfigs[t],this.plotConfigName===t&&(this.plotConfigName=this.availablePlotConfigNames[this.availablePlotConfigNames.length-1])},renamePlotConfig(t,e){this.customPlotConfigs[e]=this.customPlotConfigs[t],delete this.customPlotConfigs[t],this.plotConfigName=e},newPlotConfig(t){this.editablePlotConfig=ze(it),this.saveCustomPlotConfig(t,this.editablePlotConfig),this.plotConfigName=t},plotConfigChanged(t=""){t&&(this.plotConfigName=t),console.log("plotConfigChanged",this.plotConfigName),this.isEditing&&(this.editablePlotConfig=ze(this.customPlotConfigs[this.plotConfigName]))}},persist:{key:Oo,paths:["plotConfigName","customPlotConfigs"]}}),Io=ye({__name:"PlotConfigSelect",props:{allowEdit:{type:Boolean,default:!1},editableName:{type:String,default:"plot configuration"}},setup(t){const e=jt();return(a,o)=>{const n=kt;return D(),q(Do,{modelValue:z(e).plotConfigName,"onUpdate:modelValue":o[1]||(o[1]=i=>z(e).plotConfigName=i),"allow-edit":t.allowEdit,"allow-add":t.allowEdit,"editable-name":"plot configuration",onRename:z(e).renamePlotConfig,onDelete:z(e).deletePlotConfig,onNew:z(e).newPlotConfig},{default:L(()=>[P(n,{modelValue:z(e).plotConfigName,"onUpdate:modelValue":o[0]||(o[0]=i=>z(e).plotConfigName=i),options:z(e).availablePlotConfigNames,size:"sm",onChange:z(e).plotConfigChanged},null,8,["modelValue","options","onChange"])]),_:1},8,["modelValue","allow-edit","allow-add","onRename","onDelete","onNew"])}}}),el={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},tl=B("path",{fill:"currentColor",d:"M19.78 3h-8.56C10.55 3 10 3.55 10 4.22V8h6v6h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3m-7.34 3.67a1.23 1.23 0 1 1 0-2.46a1.23 1.23 0 0 1 1.23 1.23c0 .68-.55 1.23-1.23 1.23m6.12 6.11a1.23 1.23 0 1 1-.02-2.46c.68-.01 1.23.54 1.24 1.24c-.01.67-.55 1.21-1.22 1.22m0-6.11a1.23 1.23 0 1 1-.02-2.46a1.231 1.231 0 0 1 .02 2.46M4.22 10h8.56A1.22 1.22 0 0 1 14 11.22v8.56c0 .67-.55 1.22-1.22 1.22H4.22C3.55 21 3 20.45 3 19.78v-8.56c0-.67.55-1.22 1.22-1.22m4.28 4.28c-.67 0-1.22.55-1.22 1.22c0 .67.55 1.22 1.22 1.22c.67 0 1.22-.55 1.22-1.22a1.22 1.22 0 0 0-1.22-1.22m-3.06-3.06c-.67 0-1.22.55-1.22 1.22a1.22 1.22 0 0 0 1.22 1.22c.67 0 1.22-.55 1.22-1.22c0-.67-.55-1.22-1.22-1.22m6.11 6.11c-.67 0-1.22.55-1.22 1.22c0 .67.55 1.22 1.22 1.22a1.22 1.22 0 0 0 1.22-1.22c0-.67-.54-1.21-1.21-1.22h-.01Z"},null,-1),al=[tl];function ol(t,e){return D(),M("svg",el,al)}const nl={name:"mdi-dice-multiple",render:ol};var il=Object.defineProperty,rl=Object.defineProperties,sl=Object.getOwnPropertyDescriptors,za=Object.getOwnPropertySymbols,ll=Object.prototype.hasOwnProperty,ul=Object.prototype.propertyIsEnumerable,Ea=(t,e,a)=>e in t?il(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,xe=(t,e)=>{for(var a in e||(e={}))ll.call(e,a)&&Ea(t,a,e[a]);if(za)for(var a of za(e))ul.call(e,a)&&Ea(t,a,e[a]);return t},$a=(t,e)=>rl(t,sl(e));const cl={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(t){this.autoscroll&&t&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var t;const e=((t=this.$refs.dropdownMenu)==null?void 0:t.children[this.typeAheadPointer])||!1;if(e){const a=this.getDropdownViewport(),{top:o,bottom:n,height:i}=e.getBoundingClientRect();if(o<a.top)return this.$refs.dropdownMenu.scrollTop=e.offsetTop;if(n>a.bottom)return this.$refs.dropdownMenu.scrollTop=e.offsetTop-(a.height-i)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},dl={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let t=0;t<this.filteredOptions.length;t++)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},open(t){t&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let t=this.typeAheadPointer-1;t>=0;t--)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},typeAheadDown(){for(let t=this.typeAheadPointer+1;t<this.filteredOptions.length;t++)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},typeAheadSelect(){const t=this.filteredOptions[this.typeAheadPointer];t&&this.selectable(t)&&this.select(t)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},pl={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(t){this.mutableLoading=t}},methods:{toggleLoading(t=null){return t==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=t}}},qt=(t,e)=>{const a=t.__vccOpts||t;for(const[o,n]of e)a[o]=n;return a},hl={},fl={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},vl=B("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),gl=[vl];function ml(t,e){return D(),M("svg",fl,gl)}const yl=qt(hl,[["render",ml]]),_l={},bl={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},xl=B("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),Cl=[xl];function Sl(t,e){return D(),M("svg",bl,Cl)}const wl=qt(_l,[["render",Sl]]),Ra={Deselect:yl,OpenIndicator:wl},Pl={mounted(t,{instance:e}){if(e.appendToBody){const{height:a,top:o,left:n,width:i}=e.$refs.toggle.getBoundingClientRect();let r=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;t.unbindPosition=e.calculatePosition(t,e,{width:i+"px",left:r+n+"px",top:s+o+a+"px"}),document.body.appendChild(t)}},unmounted(t,{instance:e}){e.appendToBody&&(t.unbindPosition&&typeof t.unbindPosition=="function"&&t.unbindPosition(),t.parentNode&&t.parentNode.removeChild(t))}};function Al(t){const e={};return Object.keys(t).sort().forEach(a=>{e[a]=t[a]}),JSON.stringify(e)}let Tl=0;function Dl(){return++Tl}const Ol={components:xe({},Ra),directives:{appendToBody:Pl},mixins:[cl,dl,pl],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:t=>t},selectable:{type:Function,default:t=>!0},getOptionLabel:{type:Function,default(t){return typeof t=="object"?t.hasOwnProperty(this.label)?t[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(t)}.
https://vue-select.org/api/props.html#getoptionlabel`):t}},getOptionKey:{type:Function,default(t){if(typeof t!="object")return t;try{return t.hasOwnProperty("id")?t.id:Al(t)}catch(e){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,t,e)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(t,e,a){return(e||"").toLocaleLowerCase().indexOf(a.toLocaleLowerCase())>-1}},filter:{type:Function,default(t,e){return t.filter(a=>{let o=this.getOptionLabel(a);return typeof o=="number"&&(o=o.toString()),this.filterBy(a,o,e)})}},createOption:{type:Function,default(t){return typeof this.optionList[0]=="object"?{[this.label]:t}:t}},resetOnOptionsChange:{default:!1,validator:t=>["function","boolean"].includes(typeof t)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:t,multiple:e}){return t&&!e}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(t,e)=>t},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(t,e,{width:a,top:o,left:n}){t.style.top=o,t.style.left=n,t.style.width=a}},dropdownShouldOpen:{type:Function,default({noDrop:t,open:e,mutableLoading:a}){return t?!1:e&&!a}},uid:{type:[String,Number],default:()=>Dl()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let t=this.modelValue;return this.isTrackingValues&&(t=this.$data._value),t!=null&&t!==""?[].concat(t):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const t={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:xe({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:e=>this.search=e.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:t,listFooter:t,header:$a(xe({},t),{deselect:this.deselect}),footer:$a(xe({},t),{deselect:this.deselect})}},childComponents(){return xe(xe({},Ra),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const t=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return t;const e=this.search.length?this.filter(t,this.search,this):t;if(this.taggable&&this.search.length){const a=this.createOption(this.search);this.optionExists(a)||e.unshift(a)}return e},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(t,e){const a=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(t,e,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&a()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(t){this.isTrackingValues&&this.setInternalValueFromOptions(t)}},multiple(){this.clearSelection()},open(t){this.$emit(t?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(t){Array.isArray(t)?this.$data._value=t.map(e=>this.findOptionFromReducedValue(e)):this.$data._value=this.findOptionFromReducedValue(t)},select(t){this.$emit("option:selecting",t),this.isOptionSelected(t)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(t):(this.taggable&&!this.optionExists(t)&&(this.$emit("option:created",t),this.pushTag(t)),this.multiple&&(t=this.selectedValue.concat(t)),this.updateValue(t),this.$emit("option:selected",t)),this.onAfterSelect(t)},deselect(t){this.$emit("option:deselecting",t),this.updateValue(this.selectedValue.filter(e=>!this.optionComparator(e,t))),this.$emit("option:deselected",t)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(t){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(t){typeof this.modelValue>"u"&&(this.$data._value=t),t!==null&&(Array.isArray(t)?t=t.map(e=>this.reduce(e)):t=this.reduce(t)),this.$emit("update:modelValue",t)},toggleDropdown(t){const e=t.target!==this.searchEl;e&&t.preventDefault();const a=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||a.filter(Boolean).some(o=>o.contains(t.target)||o===t.target)){t.preventDefault();return}this.open&&e?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(t){return this.selectedValue.some(e=>this.optionComparator(e,t))},isOptionDeselectable(t){return this.isOptionSelected(t)&&this.deselectFromDropdown},optionComparator(t,e){return this.getOptionKey(t)===this.getOptionKey(e)},findOptionFromReducedValue(t){const e=o=>JSON.stringify(this.reduce(o))===JSON.stringify(t),a=[...this.options,...this.pushedTags].filter(e);return a.length===1?a[0]:a.find(o=>this.optionComparator(o,this.$data._value))||t},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let t=null;this.multiple&&(t=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(t)}},optionExists(t){return this.optionList.some(e=>this.optionComparator(e,t))},normalizeOptionForSlot(t){return typeof t=="object"?t:{[this.label]:t}},pushTag(t){this.pushedTags.push(t)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:t,multiple:e}=this;this.clearSearchOnBlur({clearSearchOnSelect:t,multiple:e})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(t){const e=n=>(n.preventDefault(),!this.isComposing&&this.typeAheadSelect()),a={8:n=>this.maybeDeleteValue(),9:n=>this.onTab(),27:n=>this.onEscape(),38:n=>(n.preventDefault(),this.typeAheadUp()),40:n=>(n.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(n=>a[n]=e);const o=this.mapKeydown(a,this);if(typeof o[t.keyCode]=="function")return o[t.keyCode](t)}}},Il=["dir"],kl=["id","aria-expanded","aria-owns"],Ll={ref:"selectedOptions",class:"vs__selected-options"},Ml=["disabled","title","aria-label","onClick"],Bl={ref:"actions",class:"vs__actions"},Vl=["disabled"],Nl={class:"vs__spinner"},zl=["id"],El=["id","aria-selected","onMouseover","onClick"],$l={key:0,class:"vs__no-options"},Rl=ee(" Sorry, no matching options. "),Fl=["id"];function Wl(t,e,a,o,n,i){const r=Eo("append-to-body");return D(),M("div",{dir:a.dir,class:mt(["v-select",i.stateClasses])},[J(t.$slots,"header",Q(oe(i.scope.header))),B("div",{id:`vs${a.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":i.dropdownOpen.toString(),"aria-owns":`vs${a.uid}__listbox`,"aria-label":"Search for option",onMousedown:e[1]||(e[1]=s=>i.toggleDropdown(s))},[B("div",Ll,[(D(!0),M(je,null,Jt(i.selectedValue,(s,l)=>J(t.$slots,"selected-option-container",{option:i.normalizeOptionForSlot(s),deselect:i.deselect,multiple:a.multiple,disabled:a.disabled},()=>[(D(),M("span",{key:a.getOptionKey(s),class:"vs__selected"},[J(t.$slots,"selected-option",Q(oe(i.normalizeOptionForSlot(s))),()=>[ee(ne(a.getOptionLabel(s)),1)]),a.multiple?(D(),M("button",{key:0,ref_for:!0,ref:u=>n.deselectButtons[l]=u,disabled:a.disabled,type:"button",class:"vs__deselect",title:`Deselect ${a.getOptionLabel(s)}`,"aria-label":`Deselect ${a.getOptionLabel(s)}`,onClick:u=>i.deselect(s)},[(D(),q(at(i.childComponents.Deselect)))],8,Ml)):F("",!0)]))])),256)),J(t.$slots,"search",Q(oe(i.scope.search)),()=>[B("input",Xt({class:"vs__search"},i.scope.search.attributes,$o(i.scope.search.events)),null,16)])],512),B("div",Bl,[He(B("button",{ref:"clearButton",disabled:a.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:e[0]||(e[0]=(...s)=>i.clearSelection&&i.clearSelection(...s))},[(D(),q(at(i.childComponents.Deselect)))],8,Vl),[[yt,i.showClearButton]]),J(t.$slots,"open-indicator",Q(oe(i.scope.openIndicator)),()=>[a.noDrop?F("",!0):(D(),q(at(i.childComponents.OpenIndicator),Q(Xt({key:0},i.scope.openIndicator.attributes)),null,16))]),J(t.$slots,"spinner",Q(oe(i.scope.spinner)),()=>[He(B("div",Nl,"Loading...",512),[[yt,t.mutableLoading]])])],512)],40,kl),P(Ha,{name:a.transition},{default:L(()=>[i.dropdownOpen?He((D(),M("ul",{id:`vs${a.uid}__listbox`,ref:"dropdownMenu",key:`vs${a.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:e[2]||(e[2]=Qt((...s)=>i.onMousedown&&i.onMousedown(...s),["prevent"])),onMouseup:e[3]||(e[3]=(...s)=>i.onMouseUp&&i.onMouseUp(...s))},[J(t.$slots,"list-header",Q(oe(i.scope.listHeader))),(D(!0),M(je,null,Jt(i.filteredOptions,(s,l)=>(D(),M("li",{id:`vs${a.uid}__option-${l}`,key:a.getOptionKey(s),role:"option",class:mt(["vs__dropdown-option",{"vs__dropdown-option--deselect":i.isOptionDeselectable(s)&&l===t.typeAheadPointer,"vs__dropdown-option--selected":i.isOptionSelected(s),"vs__dropdown-option--highlight":l===t.typeAheadPointer,"vs__dropdown-option--disabled":!a.selectable(s)}]),"aria-selected":l===t.typeAheadPointer?!0:null,onMouseover:u=>a.selectable(s)?t.typeAheadPointer=l:null,onClick:Qt(u=>a.selectable(s)?i.select(s):null,["prevent","stop"])},[J(t.$slots,"option",Q(oe(i.normalizeOptionForSlot(s))),()=>[ee(ne(a.getOptionLabel(s)),1)])],42,El))),128)),i.filteredOptions.length===0?(D(),M("li",$l,[J(t.$slots,"no-options",Q(oe(i.scope.noOptions)),()=>[Rl])])):F("",!0),J(t.$slots,"list-footer",Q(oe(i.scope.listFooter)))],40,zl)),[[r]]):(D(),M("ul",{key:1,id:`vs${a.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,Fl))]),_:3},8,["name"]),J(t.$slots,"footer",Q(oe(i.scope.footer)))],10,Il)}const ko=qt(Ol,[["render",Wl]]),Zl={class:"d-flex flex-row"},Lo=ye({__name:"PlotIndicatorSelect",props:{modelValue:{required:!1,default:"",type:String},columns:{required:!0,type:Array},label:{required:!0,type:String}},emits:["update:modelValue","indicatorSelected"],setup(t,{emit:e}){const a=t,o=E(a.modelValue||"");function n(){e("indicatorSelected",o.value),e("update:modelValue",o.value)}function i(){o.value="",n()}return K(()=>a.modelValue,r=>{o.value=r}),(r,s)=>{const l=Lt,u=Ua,c=We;return D(),M("div",Zl,[P(l,{class:"flex-grow-1",label:t.label,"label-for":"indicatorSelector"},{default:L(()=>[P(z(ko),{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=d=>o.value=d),options:t.columns,size:"sm",clearable:!1,"onOption:selected":n},null,8,["modelValue","options"])]),_:1},8,["label"]),P(c,{size:"sm",title:"Abort",class:"ms-1 mt-auto",variant:"secondary",onClick:i},{default:L(()=>[P(u)]),_:1})])}}}),Ul={class:"d-flex flex-col flex-xl-row justify-content-between mt-1"},Hl=ye({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,o=E(Ne()),n=E(le.line),i=E(Object.keys(le)),r=E(""),s=E(!1),l=E("");function u(){o.value=Ne()}const c=R(()=>{if(s.value||!r.value)return{};const p={color:o.value,type:n.value};return l.value&&n.value===le.line&&(p.fill_to=l.value),{[r.value]:p}});function d(){e("update:modelValue",c.value)}return K(()=>a.modelValue,()=>{if([r.value]=Object.keys(a.modelValue),s.value=!1,r.value&&a.modelValue){const p=a.modelValue[r.value];o.value=p.color||Ne(),n.value=p.type||le.line,l.value=p.fill_to||""}},{immediate:!0}),K([o,n,l],()=>{d()}),(p,f)=>{const g=kt,h=Lt,v=Fo,m=Za,_=nl,b=We,y=Wo,w=Zo;return D(),M("div",null,[B("div",Ul,[P(h,{class:"col flex-grow-1",label:"Type","label-for":"plotTypeSelector"},{default:L(()=>[P(g,{id:"plotTypeSelector",modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=C=>n.value=C),size:"sm",options:i.value},null,8,["modelValue","options"])]),_:1}),P(h,{label:"Color","label-for":"colsel",size:"sm",class:"ms-xl-1 col"},{default:L(()=>[P(w,null,{default:L(()=>[P(v,null,{default:L(()=>[B("div",{style:Ro({"background-color":o.value}),class:"colorbox me-1"},null,4)]),_:1}),P(m,{id:"colsel",modelValue:o.value,"onUpdate:modelValue":f[1]||(f[1]=C=>o.value=C),size:"sm"},null,8,["modelValue"]),P(y,null,{default:L(()=>[P(b,{variant:"primary",size:"sm",onClick:u},{default:L(()=>[P(_)]),_:1})]),_:1})]),_:1})]),_:1})]),n.value===z(le).line?(D(),q(Lo,{key:0,modelValue:l.value,"onUpdate:modelValue":f[2]||(f[2]=C=>l.value=C),columns:t.columns,class:"mt-1",label:"Select indicator to add"},null,8,["modelValue","columns"])):F("",!0)])}}});const Gl=Ye(Hl,[["__scopeId","data-v-7cf9561b"]]),Yt=t=>(Go("data-v-76e05652"),t=t(),jo(),t),jl={key:0},ql={class:"col-mb-3"},Yl=Yt(()=>B("hr",null,null,-1)),Kl=Yt(()=>B("hr",null,null,-1)),Jl={class:"d-flex flex-row mt-1"},Xl=Yt(()=>B("hr",null,null,-1)),Ql={class:"d-flex flex-row"},eu={key:3,class:"col-mb-5 ms-1 mt-2"},tu=ye({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},asModal:{required:!1,default:!0,type:Boolean}},setup(t){const e=jt(),a=Ga(),o=E("default"),n=E(""),i=E(!1),r=E(!1),s=E("main_plot"),l=E(),u=E(!0),c=R(()=>s.value==="main_plot"),d=R(()=>c.value?e.editablePlotConfig.main_plot:e.editablePlotConfig.subplots[s.value]),p=R(()=>["main_plot",...Object.keys(e.editablePlotConfig.subplots)]),f=R(()=>c.value?Object.keys(e.editablePlotConfig.main_plot):s.value in e.editablePlotConfig.subplots?Object.keys(e.editablePlotConfig.subplots[s.value]):[]);function g(S){const T=Object.keys(S)[0],W=S[T];c.value?e.editablePlotConfig.main_plot[T]={...W}:e.editablePlotConfig.subplots[s.value][T]={...W},e.editablePlotConfig={...e.editablePlotConfig},i.value=!1}const h=R({get(){return i.value?{}:n.value?{[n.value]:d.value[n.value]}:{}},set(S){Object.keys(S)[0]&&S?g(S):i.value=!1}}),v=R({get(){return JSON.stringify(e.editablePlotConfig,null,2)},set(S){try{l.value=JSON.parse(S),u.value=!0}catch{u.value=!1}}});function m(){c.value?(console.log(`Removing ${n.value} from MainPlot`),delete e.editablePlotConfig.main_plot[n.value]):(console.log(`Removing ${n.value} from ${s.value}`),delete e.editablePlotConfig.subplots[s.value][n.value]),e.editablePlotConfig={...e.editablePlotConfig},n.value=""}function _(S){e.editablePlotConfig.subplots={...e.editablePlotConfig.subplots,[S]:{}},s.value=S}function b(S){delete e.editablePlotConfig.subplots[S],s.value=p.value[p.value.length-1]}function y(S,T){e.editablePlotConfig.subplots[T]=e.editablePlotConfig.subplots[S],delete e.editablePlotConfig.subplots[S],s.value=T}function w(){e.editablePlotConfig=ze(e.customPlotConfigs[e.plotConfigName])}function C(){l.value!==void 0&&u.value&&(e.editablePlotConfig=l.value)}async function O(){if(a.activeBot.isWebserverMode&&!a.activeBot.strategy.strategy){ea("No strategy selected, can't load plot config.");return}try{await a.activeBot.getStrategyPlotConfig(),a.activeBot.strategyPlotConfig&&(e.editablePlotConfig=a.activeBot.strategyPlotConfig)}catch{ea("Failed to load Plot configuration from Strategy.")}}function I(){e.saveCustomPlotConfig(o.value,e.editablePlotConfig)}function k(S){i.value=!1,S&&(g({[S]:{color:Ne()}}),n.value=S)}return K(s,()=>{n.value=""}),K(()=>e.plotConfigName,()=>{n.value=""}),It(()=>{e.editablePlotConfig=ze(e.plotConfig),e.isEditing=!0,o.value=e.plotConfigName}),Uo(()=>{e.isEditing=!1}),(S,T)=>{const W=Lt,Z=kt,U=We,_e=Ho;return t.columns?(D(),M("div",jl,[P(W,{label:"Plot config name","label-for":"idPlotConfigName"},{default:L(()=>[P(Io,{"allow-edit":""})]),_:1}),B("div",ql,[Yl,P(W,{label:"Target Plot","label-for":"FieldSel"},{default:L(()=>[P(Do,{modelValue:s.value,"onUpdate:modelValue":T[1]||(T[1]=H=>s.value=H),"allow-edit":!c.value,"allow-add":"","editable-name":"plot configuration","align-vertical":"",onNew:_,onDelete:b,onRename:y},{default:L(()=>[P(Z,{id:"FieldSel",modelValue:s.value,"onUpdate:modelValue":T[0]||(T[0]=H=>s.value=H),options:p.value,"select-size":5},null,8,["modelValue","options"])]),_:1},8,["modelValue","allow-edit"])]),_:1})]),Kl,B("div",null,[P(W,{label:"Indicators in this plot","label-for":"selectedIndicators"},{default:L(()=>[P(Z,{id:"selectedIndicators",modelValue:n.value,"onUpdate:modelValue":T[2]||(T[2]=H=>n.value=H),disabled:i.value,options:f.value,"select-size":4},null,8,["modelValue","disabled","options"])]),_:1})]),B("div",Jl,[P(U,{variant:"secondary",title:"Remove indicator to plot",size:"sm",disabled:!n.value,class:"col",onClick:m},{default:L(()=>[ee(" Remove indicator ")]),_:1},8,["disabled"]),P(U,{variant:"primary",title:"Add indicator to plot",size:"sm",class:"ms-1 col",disabled:i.value,onClick:T[3]||(T[3]=H=>{i.value=!i.value,n.value=""})},{default:L(()=>[ee(" Add new indicator ")]),_:1},8,["disabled"])]),i.value?(D(),q(Lo,{key:0,columns:t.columns,class:"mt-1",label:"Select indicator to add",onIndicatorSelected:k},null,8,["columns"])):F("",!0),n.value?(D(),q(Gl,{key:1,modelValue:h.value,"onUpdate:modelValue":T[4]||(T[4]=H=>h.value=H),class:"mt-1",columns:t.columns},null,8,["modelValue","columns"])):F("",!0),Xl,B("div",Ql,[P(U,{class:"ms-1 col",variant:"secondary",size:"sm",disabled:i.value,title:"Reset to last saved configuration",onClick:w},{default:L(()=>[ee("Reset")]),_:1},8,["disabled"]),P(U,{disabled:z(a).activeBot.isWebserverMode&&z(a).activeBot.botApiVersion<2.23||!z(a).activeBot.isBotOnline||i.value,class:"ms-1 col",variant:"secondary",size:"sm",onClick:O},{default:L(()=>[ee(" From strategy ")]),_:1},8,["disabled"]),P(U,{id:"showButton",class:"ms-1 col",variant:"secondary",size:"sm",disabled:i.value,title:"Show configuration for easy transfer to a strategy",onClick:T[5]||(T[5]=H=>r.value=!r.value)},{default:L(()=>[ee(ne(r.value?"Hide":"Show"),1)]),_:1},8,["disabled"]),P(U,{class:"ms-1 col",variant:"primary",size:"sm","data-toggle":"tooltip",disabled:i.value,title:"Save configuration",onClick:I},{default:L(()=>[ee("Save")]),_:1},8,["disabled"])]),r.value?(D(),q(U,{key:2,class:"ms-1 mt-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:C},{default:L(()=>[ee("Load from String")]),_:1})):F("",!0),r.value?(D(),M("div",eu,[P(_e,{id:"TextArea",modelValue:v.value,"onUpdate:modelValue":T[6]||(T[6]=H=>v.value=H),class:"textArea",size:"sm",state:u.value},null,8,["modelValue","state"])])):F("",!0)])):F("",!0)}}});const Fa=Ye(tu,[["__scopeId","data-v-76e05652"]]),au={class:"d-flex h-100"},ou={class:"flex-fill w-100 flex-column align-items-stretch d-flex h-100"},nu={class:"d-flex me-0"},iu={class:"ms-2 d-flex flex-wrap flex-md-nowrap align-items-center w-auto"},ru={class:"ms-2 text-nowrap"},su={key:0,class:"ms-2 text-nowrap",title:"Long entry signals"},lu={key:1,class:"ms-2 text-nowrap",title:"Long exit signals"},uu={key:2,class:"ms-2 text-nowrap"},cu={key:3,class:"ms-2 text-nowrap"},du={class:"ms-auto d-flex align-items-center w-auto"},pu={class:"ms-2"},hu={class:"ms-2 me-0 me-md-1"},fu={class:"me-1 ms-1 h-100"},vu={key:1,class:"m-auto"},gu={key:1,style:{"font-size":"1.5rem"}},mu={key:0,class:"w-25 config-sidebar"},yu=ye({__name:"CandleChartContainer",props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},timerange:{required:!1,default:"",type:String},strategy:{required:!1,default:"",type:String},freqaiModel:{required:!1,default:void 0,type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(t){const e=t,a=qo(),o=Ga(),n=jt(),i=E(""),r=E(e.plotConfigModal),s=R(()=>{var v,m;return e.historicView?(v=o.activeBot.history[`${i.value}__${e.timeframe}`])==null?void 0:v.data:(m=o.activeBot.candleData[`${i.value}__${e.timeframe}`])==null?void 0:m.data}),l=R(()=>{var v;return e.strategy||((v=s.value)==null?void 0:v.strategy)||""}),u=R(()=>s.value?s.value.columns:[]),c=R(()=>s.value&&s.value.data.length>0),d=R(()=>e.historicView?o.activeBot.historyStatus===Me.loading:o.activeBot.candleDataStatus===Me.loading),p=R(()=>{switch(e.historicView?o.activeBot.historyStatus:o.activeBot.candleDataStatus){case Me.loading:return"Loading...";case Me.success:return"No data available";case Me.error:return"Failed to load data";default:return"Unknown"}}),f=E(!1),g=()=>{e.plotConfigModal?f.value=!f.value:r.value=!r.value},h=()=>{console.log("refresh",i.value,e.timeframe),i.value&&e.timeframe&&(e.historicView?o.activeBot.getPairHistory({pair:i.value,timeframe:e.timeframe,timerange:e.timerange,strategy:e.strategy,freqaimodel:e.freqaiModel}):o.activeBot.getPairCandles({pair:i.value,timeframe:e.timeframe,limit:500}))};return K(()=>e.availablePairs,()=>{e.availablePairs.find(v=>v===i.value)||([i.value]=e.availablePairs,h())}),K(()=>o.activeBot.selectedPair,()=>{i.value=o.activeBot.selectedPair,h()}),It(()=>{o.activeBot.selectedPair?i.value=o.activeBot.selectedPair:e.availablePairs.length>0&&([i.value]=e.availablePairs),n.plotConfigChanged(),c.value||h()}),(v,m)=>{const _=Jo,b=We,y=Yo,w=ks,C=Xo,O=Ko;return D(),M("div",au,[B("div",ou,[B("div",nu,[B("div",iu,[B("span",ru,ne(l.value)+" | "+ne(t.timeframe||""),1),P(z(ko),{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=I=>i.value=I),class:"ms-2",options:t.availablePairs,style:{"min-width":"7em"},size:"sm",clearable:!1,onInput:h},null,8,["modelValue","options"]),P(b,{class:"ms-2",disabled:!i.value,size:"sm",onClick:h},{default:L(()=>[P(_)]),_:1},8,["disabled"]),s.value?(D(),M("small",su,"Long signals: "+ne(s.value.enter_long_signals||s.value.buy_signals),1)):F("",!0),s.value?(D(),M("small",lu,"Long exit: "+ne(s.value.exit_long_signals||s.value.sell_signals),1)):F("",!0),s.value&&s.value.enter_short_signals?(D(),M("small",uu,"Short entries: "+ne(s.value.enter_short_signals),1)):F("",!0),s.value&&s.value.exit_short_signals?(D(),M("small",cu,"Short exits: "+ne(s.value.exit_short_signals),1)):F("",!0)]),B("div",du,[P(y,{modelValue:z(a).useHeikinAshiCandles,"onUpdate:modelValue":m[1]||(m[1]=I=>z(a).useHeikinAshiCandles=I)},{default:L(()=>[ee("Heikin Ashi")]),_:1},8,["modelValue"]),B("div",pu,[P(Io)]),B("div",hu,[P(b,{size:"sm",title:"Plot configurator",onClick:g},{default:L(()=>[P(w,{width:"12",height:"12"})]),_:1})])])]),B("div",fu,[c.value?(D(),q(Ks,{key:0,dataset:s.value,trades:t.trades,"plot-config":z(n).plotConfig,"heikin-ashi":z(a).useHeikinAshiCandles,"use-u-t-c":z(a).timezone==="UTC",theme:z(a).chartTheme,"slider-position":t.sliderPosition},null,8,["dataset","trades","plot-config","heikin-ashi","use-u-t-c","theme","slider-position"])):(D(),M("div",vu,[d.value?(D(),q(C,{key:0,label:"Spinning"})):(D(),M("div",gu,ne(p.value),1))]))])]),P(Ha,{name:"fade",mode:"in-out"},{default:L(()=>[t.plotConfigModal?F("",!0):He((D(),M("div",mu,[P(Fa,{columns:u.value,"as-modal":!1},null,8,["columns"])],512)),[[yt,r.value]])]),_:1}),t.plotConfigModal?(D(),q(O,{key:0,id:"plotConfiguratorModal",modelValue:f.value,"onUpdate:modelValue":m[2]||(m[2]=I=>f.value=I),title:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:L(()=>[f.value?(D(),q(Fa,{key:0,columns:u.value},null,8,["columns"])):F("",!0)]),_:1},8,["modelValue"])):F("",!0)])}}});const wu=Ye(yu,[["__scopeId","data-v-25f9d57c"]]);export{wu as C};
//# sourceMappingURL=CandleChartContainer-778f1094.js.map
