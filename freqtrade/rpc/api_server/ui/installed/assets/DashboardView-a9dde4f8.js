import{a as x,D as E}from"./DraggableContainer-b1ec4b91.js";import{C as F,P as H,T as K}from"./TradesLog-c1067f34.js";import{d as A,u as G,i,o as y,h as D,w as o,a as _,j as n,k as T,t as O,c as P,F as M,f as N,a3 as W,A as q,G as J,r as Q,H as k,aT as S,x as X,I as R,b as a,K as L}from"./index-3d1c2723.js";import{P as $,b as U}from"./InfoBox.vue_vue_type_script_setup_true_lang-4f349d1b.js";import{T as j}from"./TradeList-ad9d6a9a.js";import"./install-419c7b94.js";import"./chartZoom-61c7f12b.js";const Y={class:"d-flex flex-row"},Z={key:0},ee=["title"],te={class:"text-small"},ae={key:0},oe={class:"text-profit"},le={class:"text-loss"},se=A({__name:"BotComparisonList",setup(I){const t=G(),b=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],V=i(()=>{const B=[],d={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(t.allProfit).forEach(([s,l])=>{var c,m,f,p,h;const e=t.allOpenTrades[s].reduce((C,r)=>C+r.stake_amount,0),u=t.allOpenTrades[s].reduce((C,r)=>C+r.profit_ratio*r.stake_amount,0)/e,v=t.allOpenTrades[s].reduce((C,r)=>C+(r.profit_abs??0),0);B.push({botId:s,botName:t.availableBots[s].botName,trades:`${t.allOpenTradeCount[s]} / ${((c=t.allBotState[s])==null?void 0:c.max_open_trades)||"N/A"}`,profitClosed:l.profit_closed_coin,profitClosedRatio:l.profit_closed_ratio||0,stakeCurrency:((m=t.allBotState[s])==null?void 0:m.stake_currency)||"",profitOpenRatio:u,profitOpen:v,wins:l.winning_trades,losses:l.losing_trades,balance:((f=t.allBalance[s])==null?void 0:f.total_bot)??((p=t.allBalance[s])==null?void 0:p.total),stakeCurrencyDecimals:((h=t.allBotState[s])==null?void 0:h.stake_currency_decimals)||3}),l.profit_closed_coin!==void 0&&(d.profitClosed+=l.profit_closed_coin,d.profitOpen+=l.profit_all_coin,d.wins+=l.winning_trades,d.losses+=l.losing_trades)}),B.push(d),B});return(B,d)=>{const s=W,l=q;return y(),D(l,{ref:"tradesTable",small:"",hover:"","show-empty":"","primary-key":"botId",items:V.value,fields:b},{"cell(botName)":o(e=>[_("div",Y,[e.item.botId&&n(t).botCount>1?(y(),D(s,{key:0,modelValue:n(t).botStores[e.item.botId].isSelected,"onUpdate:modelValue":u=>n(t).botStores[e.item.botId].isSelected=u,title:"Show bot in Dashboard"},null,8,["modelValue","onUpdate:modelValue"])):T("",!0),_("span",null,O(e.value),1)])]),"cell(profitOpen)":o(e=>[e.item.profitOpen&&e.item.botId!="Summary"?(y(),D($,{key:0,"profit-ratio":e.item.profitOpenRatio,"profit-abs":e.item.profitOpen,"stake-currency":e.item.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):T("",!0)]),"cell(profitClosed)":o(e=>[e.item.profitClosed&&e.item.botId!="Summary"?(y(),D($,{key:0,"profit-ratio":e.item.profitClosedRatio,"profit-abs":e.item.profitClosed,"stake-currency":e.item.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):T("",!0)]),"cell(balance)":o(e=>[e.item.balance?(y(),P("div",Z,[_("span",{title:e.item.stakeCurrency},O(n(M)(e.item.balance,e.item.stakeCurrencyDecimals)),9,ee),_("span",te,O(e.item.stakeCurrency),1)])):T("",!0)]),"cell(winVsLoss)":o(e=>[e.item.losses!==void 0?(y(),P("div",ae,[_("span",oe,O(e.item.wins),1),N(" / "),_("span",le,O(e.item.losses),1)])):T("",!0)]),_:1},8,["items"])}}}),re={class:"d-flex justify-content-center"},ie={class:"d-flex justify-content-center"},ye=A({__name:"DashboardView",setup(I){const t=G(),b=J(),V=Q(""),B=r=>{V.value=r},d=i(()=>["","sm","md","lg","xl"].includes(V.value)),s=i(()=>b.layoutLocked||!d.value),l=i(()=>d.value?b.dashboardLayout:[...b.getDashboardLayoutSm]),e=r=>{d.value&&(console.log("newlayout",r),console.log("saving dashboard"),b.dashboardLayout=r)},u=i(()=>k(l.value,S.dailyChart)),v=i(()=>k(l.value,S.botComparison)),c=i(()=>k(l.value,S.allOpenTrades)),m=i(()=>k(l.value,S.allClosedTrades)),f=i(()=>k(l.value,S.cumChartChart)),p=i(()=>k(l.value,S.profitDistributionChart)),h=i(()=>k(l.value,S.tradesLogChart)),C=i(()=>({sm:b.getDashboardLayoutSm}));return X(async()=>{await t.allGetDaily({timescale:30}),t.activeBot.getOpenTrades(),t.activeBot.getProfit()}),(r,ne)=>{const g=R("grid-item"),z=R("grid-layout");return y(),D(z,{class:"h-100 w-100","row-height":50,layout:l.value,"vertical-compact":!1,margin:[5,5],"responsive-layouts":C.value,"is-resizable":!s.value,"is-draggable":!s.value,responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:e,onBreakpointChanged:B},{default:o(({gridItemProps:w})=>[a(g,L(w,{i:u.value.i,x:u.value.x,y:u.value.y,w:u.value.w,h:u.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:`Daily Profit ${n(t).botCount>1?"combined":""}`},{default:o(()=>[n(t).allDailyStatsSelectedBots?(y(),D(E,{key:0,"daily-stats":n(t).allDailyStatsSelectedBots,"show-title":!1},null,8,["daily-stats"])):T("",!0)]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:v.value.i,x:v.value.x,y:v.value.y,w:v.value.w,h:v.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:"Bot comparison"},{default:o(()=>[a(se)]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:c.value.i,x:c.value.x,y:c.value.y,w:c.value.w,h:c.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,null,{header:o(()=>[_("div",re,[N(" Open Trades "),a(U,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:o(()=>[a(j,{"active-trades":"",trades:n(t).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:f.value.i,x:f.value.x,y:f.value.y,w:f.value.w,h:f.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:"Cumulative Profit"},{default:o(()=>[a(F,{trades:n(t).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:m.value.i,x:m.value.x,y:m.value.y,w:m.value.w,h:m.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,null,{header:o(()=>[_("div",ie,[N(" Closed Trades "),a(U,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:o(()=>[a(j,{"active-trades":!1,"show-filter":"",trades:n(t).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:p.value.i,x:p.value.x,y:p.value.y,w:p.value.w,h:p.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:"Profit Distribution"},{default:o(()=>[a(H,{trades:n(t).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:h.value.i,x:h.value.x,y:h.value.y,w:h.value.w,h:h.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:"Trades Log"},{default:o(()=>[a(K,{trades:n(t).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{ye as default};
//# sourceMappingURL=DashboardView-a9dde4f8.js.map
